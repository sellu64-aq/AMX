{
  "dashboard": {
    "folderUid": "app777Sel",
    "message": "deployment",
    "overwrite": true,
  "__inputs": [
    {
    "name": "influx_DS",
    "label": "Select InfluxDB Source",
    "description": "Choose the InfluxDB data source (Pri/Sec)",
    "type": "datasource",
    "pluginId": "influxdb",
    "pluginName": "InfluxDB"
    }
  ],
  "__elements": {},
  "__requires": [
    {
      "type": "panel",
      "id": "gauge",
      "name": "Gauge",
      "version": ""
    },
    {
      "type": "grafana",
      "id": "grafana",
      "name": "Grafana",
      "version": "12.0.2"
    },
    {
      "type": "datasource",
      "id": "influxdb",
      "name": "InfluxDB",
      "version": "1.0.0"
    },
    {
      "type": "panel",
      "id": "piechart",
      "name": "Pie chart",
      "version": ""
    },
    {
      "type": "panel",
      "id": "stat",
      "name": "Stat",
      "version": ""
    },
    {
      "type": "panel",
      "id": "state-timeline",
      "name": "State timeline",
      "version": ""
    },
    {
      "type": "panel",
      "id": "table",
      "name": "Table",
      "version": ""
    },
    {
      "type": "panel",
      "id": "timeseries",
      "name": "Time series",
      "version": ""
    }
  ],
  "annotations": {
    "list": [
      {
        "builtIn": 1,
        "datasource": {
          "type": "grafana",
          "uid": "-- Grafana --"
        },
        "enable": true,
        "hide": true,
        "iconColor": "rgba(0, 211, 255, 1)",
        "name": "Annotations & Alerts",
        "type": "dashboard"
      }
    ]
  },
  "description": "This dashboard provides basic performance metrics for mysql/mariadb.\r\n\r\nUses telegraf built-in plugin",
  "editable": true,
  "fiscalYearStartMonth": 0,
  "graphTooltip": 0,
  "id": null,
  "links": [],
  "liveNow": true,
  "panels": [
    {
      "collapsed": false,
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 0
      },
      "id": 69,
      "panels": [],
      "title": "MySQL Overview",
      "type": "row"
    },
    {
      "datasource": {
        "type": "influxdb",
        "uid": "${InfluxDS}"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "decimals": 1,
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green"
              },
              {
                "color": "#EAB839",
                "value": 25
              },
              {
                "color": "#EF843C",
                "value": 50
              },
              {
                "color": "red",
                "value": 75
              }
            ]
          },
          "unit": "percent"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 4,
        "w": 4,
        "x": 0,
        "y": 1
      },
      "id": 129,
      "options": {
        "minVizHeight": 75,
        "minVizWidth": 75,
        "orientation": "auto",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "",
          "values": false
        },
        "showThresholdLabels": false,
        "showThresholdMarkers": true,
        "sizing": "auto"
      },
      "pluginVersion": "12.0.2",
      "targets": [
        {
          "alias": "Temp Tables on Disk Percentage ",
          "datasource": {
            "type": "influxdb",
            "uid": "${DS_DALLAS_SEC}"
          },
          "query": "SELECT last(\"tmp_disk_pct\") \nFROM \"mysql_temp_tables\" \nWHERE (\"zone\" =~ /^$zone$/ AND \"host\" =~ /^$host$/) AND $timeFilter \nGROUP BY \"host\"",
          "rawQuery": true,
          "refId": "A",
          "resultFormat": "table"
        }
      ],
      "title": "Tmp Tables on Disk % ",
      "type": "gauge"
    },
    {
      "datasource": {
        "type": "influxdb",
        "uid": "${InfluxDS}"
      },
      "description": "",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "decimals": 0,
          "mappings": [
            {
              "options": {
                "0": {
                  "color": "semi-dark-red",
                  "index": 1,
                  "text": "No"
                },
                "1": {
                  "color": "semi-dark-green",
                  "index": 0,
                  "text": "Yes"
                }
              },
              "type": "value"
            }
          ],
          "max": 120,
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "semi-dark-green"
              },
              {
                "color": "#EAB839",
                "value": 70
              },
              {
                "color": "#c04a07",
                "value": 80
              },
              {
                "color": "semi-dark-red",
                "value": 90
              }
            ]
          },
          "unit": "none"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 4,
        "w": 4,
        "x": 4,
        "y": 1
      },
      "id": 88,
      "options": {
        "minVizHeight": 75,
        "minVizWidth": 75,
        "orientation": "auto",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "",
          "values": false
        },
        "showThresholdLabels": false,
        "showThresholdMarkers": true,
        "sizing": "auto"
      },
      "pluginVersion": "12.0.2",
      "targets": [
        {
          "alias": "buffer_pool_hit_ratio",
          "datasource": {
            "type": "influxdb",
            "uid": "${DS_DALLAS_PRI}"
          },
          "query": "SELECT last(\"connection_usage_pct\") \nFROM \"mysql_connections\" \nWHERE (\"zone\" =~ /^$zone$/ AND \"host\" =~ /^$host$/) AND $timeFilter ",
          "rawQuery": true,
          "refId": "A",
          "resultFormat": "table"
        }
      ],
      "title": "Connection Usage",
      "type": "gauge"
    },
    {
      "datasource": {
        "type": "influxdb",
        "uid": "${InfluxDS}"
      },
      "description": "## InnoDB Buffer Pool Hit Ratio % âš¡ CRITICAL METRIC\n\n**What it shows:** Percentage of data requests served from memory (buffer pool) vs. disk.\n\n**Formula:** ((read_requests - disk_reads) / read_requests) Ã— 100\n\n**Target Thresholds:**\n- ðŸ”´ Critical: <95% (Too many disk reads!)\n- ðŸŸ¡ Warning: 95-99% (Needs attention)\n- ðŸŸ¢ Excellent: >99% (Optimal)\n- ðŸŒŸ Perfect: >99.9%\n\n**Why This is THE Most Important Metric:**\n- Memory is 1000x faster than disk\n- Low hit ratio = severe performance degradation\n- Direct impact on query response time\n- Affects all operations (reads, writes, joins)\n\n**Healthy Range:** >99% at all times\n\n**Troubleshooting:**\n\n**Low Buffer Pool Hit Ratio (<99%):**\n\n**IMMEDIATE ACTION (Critical <95%):**\n1. **Check current buffer pool size:**\n```sql\n   SHOW VARIABLES LIKE 'innodb_buffer_pool_size';\n   SELECT @@innodb_buffer_pool_size/1024/1024/1024 AS buffer_pool_gb;",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "decimals": 0,
          "mappings": [
            {
              "options": {
                "0": {
                  "color": "semi-dark-red",
                  "index": 1,
                  "text": "No"
                },
                "1": {
                  "color": "semi-dark-green",
                  "index": 0,
                  "text": "Yes"
                }
              },
              "type": "value"
            }
          ],
          "max": 120,
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "#a91d21"
              },
              {
                "color": "#EAB839",
                "value": 95
              },
              {
                "color": "#c04a07",
                "value": 97
              },
              {
                "color": "#10a825",
                "value": 99
              }
            ]
          },
          "unit": "none"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 4,
        "w": 4,
        "x": 8,
        "y": 1
      },
      "id": 57,
      "options": {
        "minVizHeight": 75,
        "minVizWidth": 75,
        "orientation": "auto",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "",
          "values": false
        },
        "showThresholdLabels": false,
        "showThresholdMarkers": true,
        "sizing": "auto"
      },
      "pluginVersion": "12.0.2",
      "targets": [
        {
          "alias": "buffer_pool_hit_ratio",
          "datasource": {
            "type": "influxdb",
            "uid": "${DS_DALLAS_PRI}"
          },
          "query": "SELECT last(\"buffer_pool_hit_ratio\") AS \"buffer_pool_hit_ratio\"\nFROM \"mysql_innodb_buffer_pool\" \nWHERE (\"zone\" =~ /^$zone$/ AND \"host\" =~ /^$host$/) AND $timeFilter \nGROUP BY \"host\"",
          "rawQuery": true,
          "refId": "A",
          "resultFormat": "table"
        }
      ],
      "title": "buffer_pool_hit_ratio",
      "type": "gauge"
    },
    {
      "datasource": {
        "type": "influxdb",
        "uid": "${InfluxDS}"
      },
      "description": "",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "decimals": 0,
          "mappings": [
            {
              "options": {
                "0": {
                  "color": "semi-dark-red",
                  "index": 1,
                  "text": "No"
                },
                "1": {
                  "color": "semi-dark-green",
                  "index": 0,
                  "text": "Yes"
                }
              },
              "type": "value"
            }
          ],
          "max": 120,
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "#a91d21"
              },
              {
                "color": "#EAB839",
                "value": 70
              },
              {
                "color": "#c04a07",
                "value": 80
              },
              {
                "color": "#10a825",
                "value": 90
              }
            ]
          },
          "unit": "none"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 4,
        "w": 4,
        "x": 12,
        "y": 1
      },
      "id": 145,
      "options": {
        "minVizHeight": 75,
        "minVizWidth": 75,
        "orientation": "auto",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "",
          "values": false
        },
        "showThresholdLabels": false,
        "showThresholdMarkers": true,
        "sizing": "auto"
      },
      "pluginVersion": "12.0.2",
      "targets": [
        {
          "alias": "Thread Cache Hit Ratio",
          "datasource": {
            "type": "influxdb",
            "uid": "${DS_DALLAS_PRI}"
          },
          "query": "SELECT last(\"thread_cache_hit_ratio\") AS \"Thread Cache Hit Ratio\"\nFROM \"mysql_thread_cache\" \nWHERE (\"zone\" =~ /^$zone$/ AND \"host\" =~ /^$host$/) AND $timeFilter \nGROUP BY \"host\"",
          "rawQuery": true,
          "refId": "A",
          "resultFormat": "table"
        }
      ],
      "title": "Thread Cache Hit Ratio",
      "type": "gauge"
    },
    {
      "datasource": {
        "type": "influxdb",
        "uid": "${InfluxDS}"
      },
      "description": "",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "decimals": 0,
          "mappings": [
            {
              "options": {
                "0": {
                  "color": "semi-dark-red",
                  "index": 1,
                  "text": "No"
                },
                "1": {
                  "color": "semi-dark-green",
                  "index": 0,
                  "text": "Yes"
                }
              },
              "type": "value"
            }
          ],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "semi-dark-green"
              },
              {
                "color": "#EAB839",
                "value": 1
              },
              {
                "color": "semi-dark-orange",
                "value": 5
              },
              {
                "color": "semi-dark-red",
                "value": 7
              }
            ]
          },
          "unit": "none"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 4,
        "w": 4,
        "x": 16,
        "y": 1
      },
      "id": 91,
      "options": {
        "minVizHeight": 75,
        "minVizWidth": 75,
        "orientation": "auto",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "",
          "values": false
        },
        "showThresholdLabels": false,
        "showThresholdMarkers": true,
        "sizing": "auto"
      },
      "pluginVersion": "12.0.2",
      "targets": [
        {
          "alias": "Slow Query %",
          "datasource": {
            "type": "influxdb",
            "uid": "${DS_DALLAS_PRI}"
          },
          "query": "SELECT last(\"tmp_disk_pct\") \nFROM \"mysql_temp_tables\" \nWHERE (\"zone\" =~ /^$zone$/ AND \"host\" =~ /^$host$/) AND $timeFilter ",
          "rawQuery": true,
          "refId": "A",
          "resultFormat": "table"
        }
      ],
      "title": "Temp Tables %",
      "type": "gauge"
    },
    {
      "datasource": {
        "type": "influxdb",
        "uid": "${InfluxDS}"
      },
      "description": "## Slow Query Percentage\n\n**What it shows:** Percentage of queries exceeding long_query_time threshold.\n\n**Formula:** (slow_queries / total_queries) Ã— 100\n\n**Target Thresholds:**\n- ðŸŸ¢ Excellent: <0.5%\n- ðŸŸ¡ Acceptable: 0.5-1%\n- ðŸŸ  Warning: 1-5%\n- ðŸ”´ Critical: >5%\n\n**Healthy Range:** <1% (ideally <0.5%)\n\nCommon Causes & Fixes:\n\nMissing Indexes:\n-- Find tables with full scans\n   SELECT * FROM sys.statements_with_full_table_scans LIMIT 10;\n   \n   -- Add appropriate indexes\n   ALTER TABLE table_name ADD INDEX idx_column (column_name);\n\nInefficient Queries:\n\nRemove SELECT *\nAdd LIMIT clauses\nOptimize JOIN conditions\nUse EXPLAIN to analyze queries\n\n\nLarge Result Sets:\n\nImplement pagination\nAdd appropriate WHERE filters\nConsider result caching\n\n\nLocking Issues:\n\nCheck for table locks\nConsider READ UNCOMMITTED for reporting queries\nOptimize transaction scope\n\n\n**Current long_query_time Setting:**\n```sql\nSHOW VARIABLES LIKE 'long_query_time';  -- Usually 1-2 seconds.\n\n\n\n",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "decimals": 0,
          "mappings": [
            {
              "options": {
                "0": {
                  "color": "semi-dark-red",
                  "index": 1,
                  "text": "No"
                },
                "1": {
                  "color": "semi-dark-green",
                  "index": 0,
                  "text": "Yes"
                }
              },
              "type": "value"
            }
          ],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "semi-dark-green"
              },
              {
                "color": "#EAB839",
                "value": 1
              },
              {
                "color": "semi-dark-orange",
                "value": 5
              },
              {
                "color": "semi-dark-red",
                "value": 7
              }
            ]
          },
          "unit": "none"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 4,
        "w": 4,
        "x": 20,
        "y": 1
      },
      "id": 89,
      "options": {
        "minVizHeight": 75,
        "minVizWidth": 75,
        "orientation": "auto",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "",
          "values": false
        },
        "showThresholdLabels": false,
        "showThresholdMarkers": true,
        "sizing": "auto"
      },
      "pluginVersion": "12.0.2",
      "targets": [
        {
          "alias": "Slow Query %",
          "datasource": {
            "type": "influxdb",
            "uid": "${DS_DALLAS_PRI}"
          },
          "query": "SELECT last(\"slow_query_pct\") \nFROM \"mysql_queries\" \nWHERE (\"zone\" =~ /^$zone$/ AND \"host\" =~ /^$host$/) AND $timeFilter ",
          "rawQuery": true,
          "refId": "A",
          "resultFormat": "table"
        }
      ],
      "title": "Slow Query %",
      "type": "gauge"
    },
    {
      "datasource": {
        "type": "influxdb",
        "uid": "${InfluxDS}"
      },
      "fieldConfig": {
        "defaults": {
          "decimals": 1,
          "mappings": [
            {
              "options": {
                "match": "null",
                "result": {
                  "text": "N/A"
                }
              },
              "type": "special"
            }
          ],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "rgba(245, 54, 54, 0.9)"
              },
              {
                "color": "rgba(237, 129, 40, 0.89)",
                "value": 300
              },
              {
                "color": "rgba(50, 172, 45, 0.97)",
                "value": 3600
              }
            ]
          },
          "unit": "s"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 3,
        "w": 4,
        "x": 0,
        "y": 5
      },
      "hideTimeOverride": true,
      "id": 2,
      "maxDataPoints": 100,
      "options": {
        "colorMode": "none",
        "graphMode": "none",
        "justifyMode": "auto",
        "orientation": "horizontal",
        "percentChangeColorMode": "standard",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "",
          "values": false
        },
        "showPercentChange": false,
        "textMode": "auto",
        "wideLayout": true
      },
      "pluginVersion": "12.0.2",
      "targets": [
        {
          "datasource": {
            "type": "influxdb",
            "uid": "${DS_DALLAS_SEC}"
          },
          "dsType": "influxdb",
          "groupBy": [
            {
              "params": [
                "$interval"
              ],
              "type": "time"
            },
            {
              "params": [
                "null"
              ],
              "type": "fill"
            }
          ],
          "measurement": "mysql",
          "policy": "default",
          "query": "SELECT last(\"uptime\") \nFROM \"mysql_uptime\" \nWHERE (\"zone\" =~ /^$zone$/ AND \"host\" =~ /^$host$/) AND $timeFilter \nGROUP BY \"host\"",
          "rawQuery": true,
          "refId": "A",
          "resultFormat": "table",
          "select": [
            [
              {
                "params": [
                  "uptime_since_flush_status"
                ],
                "type": "field"
              },
              {
                "params": [],
                "type": "mean"
              }
            ]
          ],
          "tags": [],
          "target": "servers.$host.mysql-status.gauge-Uptime",
          "textEditor": true
        }
      ],
      "timeFrom": "1h",
      "title": "MySQL Uptime",
      "type": "stat"
    },
    {
      "datasource": {
        "type": "influxdb",
        "uid": "${InfluxDS}"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "palette-classic"
          },
          "custom": {
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            }
          },
          "mappings": [],
          "unit": "short"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 7,
        "w": 5,
        "x": 4,
        "y": 5
      },
      "id": 115,
      "options": {
        "legend": {
          "displayMode": "list",
          "placement": "bottom",
          "showLegend": true,
          "values": [
            "percent",
            "value"
          ]
        },
        "pieType": "pie",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "",
          "values": false
        },
        "tooltip": {
          "hideZeros": false,
          "mode": "single",
          "sort": "none"
        }
      },
      "pluginVersion": "12.0.2",
      "targets": [
        {
          "datasource": {
            "type": "influxdb",
            "uid": "${DS_DALLAS_SEC}"
          },
          "query": "SELECT \n    last(\"com_select\") AS \"SELECT\",\n    last(\"com_insert\") + last(\"com_update\") + last(\"com_delete\") AS \"WRITE\"\nFROM \"mysql_throughput\" \nWHERE (\"zone\" =~ /^$zone$/ AND \"host\" =~ /^$host$/) AND $timeFilter \nGROUP BY \"host\"",
          "rawQuery": true,
          "refId": "A",
          "resultFormat": "table"
        }
      ],
      "title": "Read vs Write Ratio",
      "type": "piechart"
    },
    {
      "datasource": {
        "type": "influxdb",
        "uid": "${InfluxDS}"
      },
      "description": "## Buffer Pool Wait Free ðŸš¨ EMERGENCY METRIC\n\n**What it shows:** Number of times InnoDB had to wait for a free page in buffer pool.\n\n**Healthy Value:** 0 (ALWAYS!)\n\n**Threshold:**\n- ðŸŸ¢ Normal: 0\n- ðŸ”´ **CRITICAL: >0** (Emergency situation!)\n\n**Why This is an EMERGENCY:**\n- Means buffer pool is COMPLETELY FULL\n- No free pages available for new data\n- InnoDB must evict pages (expensive operation)\n- All queries waiting for free pages\n- Database essentially stalled\n- Users experiencing timeouts\n\n**IMMEDIATE ACTION REQUIRED:**\n\n**Step 1: EMERGENCY Response (Within 1 minute)**\n```sql\n-- 1. Check current situation\nSHOW ENGINE INNODB STATUS\\G\n\n-- 2. Identify blocking queries\nSELECT * FROM information_schema.processlist \nWHERE command != 'Sleep' \nORDER BY time DESC LIMIT 20;\n\n-- 3. Kill long-running queries if necessary\nKILL <process_id>;",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "decimals": 0,
          "mappings": [
            {
              "options": {
                "0": {
                  "color": "semi-dark-red",
                  "index": 1,
                  "text": "No"
                },
                "1": {
                  "color": "semi-dark-green",
                  "index": 0,
                  "text": "Yes"
                }
              },
              "type": "value"
            }
          ],
          "max": 120,
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "#a91d21"
              },
              {
                "color": "#EAB839",
                "value": 95
              },
              {
                "color": "#c04a07",
                "value": 97
              },
              {
                "color": "#10a825",
                "value": 99
              }
            ]
          },
          "unit": "none"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 2,
        "w": 4,
        "x": 9,
        "y": 5
      },
      "id": 94,
      "options": {
        "colorMode": "background",
        "graphMode": "area",
        "justifyMode": "auto",
        "orientation": "auto",
        "percentChangeColorMode": "standard",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "",
          "values": false
        },
        "showPercentChange": false,
        "textMode": "auto",
        "wideLayout": true
      },
      "pluginVersion": "12.0.2",
      "targets": [
        {
          "alias": "Buffer Pool Wait Free",
          "datasource": {
            "type": "influxdb",
            "uid": "${DS_DALLAS_PRI}"
          },
          "query": "SELECT last(\"buffer_pool_wait_free\") AS \"Buffer Pool Wait Free\"\nFROM \"mysql_innodb_buffer_pool\" \nWHERE (\"zone\" =~ /^$zone$/ AND \"host\" =~ /^$host$/) AND $timeFilter \nGROUP BY time($interval)",
          "rawQuery": true,
          "refId": "A",
          "resultFormat": "table"
        }
      ],
      "type": "stat"
    },
    {
      "datasource": {
        "type": "influxdb",
        "uid": "${InfluxDS}"
      },
      "description": "## Queries Per Second (QPS)\n\n**What it shows:** Total number of queries executed per second across all types.\n\n**Healthy Range:**\n- Small DB: 100-1,000 QPS\n- Medium DB: 1,000-10,000 QPS\n- Large DB: >10,000 QPS\n\n**What to Watch:**\n- **Sudden Spikes:** May indicate traffic surge or runaway query\n- **Sudden Drops:** Could mean application issues or connection problems\n- **Gradual Increase:** Normal growth pattern (good!)\n- **High Variability:** Indicates inconsistent load\n\n**Baseline:** Establish your normal QPS during peak/off-peak hours\n\n**Troubleshooting:**\n\n**Unexpected Spike in QPS:**\n1. Check for application deployments or changes\n2. Identify top queries:\n```sql\n   SELECT digest_text, count_star, avg_timer_wait/1000000000000 AS avg_sec\n   FROM performance_schema.events_statements_summary_by_digest\n   ORDER BY count_star DESC LIMIT 10;\n\n\nLook for cartesian joins or missing WHERE clauses\nCheck if batch jobs are running\nVerify caching is working (app-level, query cache)\n\nSudden Drop in QPS:\n\nCheck application health and connectivity\nVerify no connection pool exhaustion\nCheck for blocking queries: SHOW PROCESSLIST;\nReview error logs for connection issues\n\nPerformance Impact:\n\nHigh QPS + High CPU = Query optimization needed\nHigh QPS + Low CPU = Good optimization\nLow QPS + High CPU = Inefficient queries or locks",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds",
            "seriesBy": "last"
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green"
              },
              {
                "color": "#EAB839",
                "value": 3000
              },
              {
                "color": "#EF843C",
                "value": 5000
              },
              {
                "color": "red",
                "value": 7500
              }
            ]
          },
          "unit": "queries/sec"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 4,
        "w": 3,
        "x": 13,
        "y": 5
      },
      "id": 74,
      "options": {
        "colorMode": "background",
        "graphMode": "area",
        "justifyMode": "auto",
        "orientation": "auto",
        "percentChangeColorMode": "standard",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "",
          "values": false
        },
        "showPercentChange": false,
        "textMode": "auto",
        "wideLayout": true
      },
      "pluginVersion": "12.0.2",
      "targets": [
        {
          "alias": "Counts",
          "datasource": {
            "type": "influxdb",
            "uid": "${DS_DALLAS_SEC}"
          },
          "query": "SELECT derivative(mean(\"queries\"), 1s) AS \"qps\"\nFROM \"mysql_queries\" \nWHERE (\"zone\" =~ /^$zone$/ AND \"host\" =~ /^$host$/) AND $timeFilter \nGROUP BY time($interval), \"host\" fill(null)",
          "rawQuery": true,
          "refId": "A",
          "resultFormat": "time_series"
        }
      ],
      "title": "QPS",
      "type": "stat"
    },
    {
      "datasource": {
        "type": "influxdb",
        "uid": "${InfluxDS}"
      },
      "description": "âœ… Purpose:\n\nThis retrieves the most recent status of:\n\n    slave_Slave_IO_Running â€“ Whether the I/O thread (which fetches binlogs from the master) is running.\n\n    slave_Slave_SQL_Running â€“ Whether the SQL thread (which applies the binlogs) is running.\n\nðŸ“Š Expected Values:\nField\tMeaning (Value)\tInterpretation\nslave_Slave_IO_Running\t1 (true) / 0 (false)\t1 means the IO thread is running\nslave_Slave_SQL_Running\t1 (true) / 0 (false)\t1 means the SQL thread is running\n\nIf either is 0, it indicates replication has failed or is paused.\n\n",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "palette-classic"
          },
          "mappings": [
            {
              "options": {
                "0": {
                  "color": "#840514",
                  "index": 1,
                  "text": "Stopped"
                },
                "1": {
                  "color": "#136e07",
                  "index": 0,
                  "text": "Running"
                }
              },
              "type": "value"
            }
          ],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green"
              },
              {
                "color": "red",
                "value": 80
              }
            ]
          },
          "unit": "none"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 4,
        "w": 8,
        "x": 16,
        "y": 5
      },
      "id": 87,
      "options": {
        "colorMode": "background",
        "graphMode": "none",
        "justifyMode": "center",
        "orientation": "horizontal",
        "percentChangeColorMode": "standard",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "",
          "values": false
        },
        "showPercentChange": false,
        "text": {
          "titleSize": 14,
          "valueSize": 16
        },
        "textMode": "auto",
        "wideLayout": true
      },
      "pluginVersion": "12.0.2",
      "targets": [
        {
          "alias": "$tag_host, $tag_source_host, $tag_channel - Replication Stats ",
          "datasource": {
            "type": "influxdb",
            "uid": "${DS_DALLAS_SEC}"
          },
          "query": "SELECT last(\"replication_healthy\") \nFROM \"mysql_replica_status\" \nWHERE \"zone\" =~ /^$zone$/ AND \"host\" =~ /^$host$/ AND $timeFilter \nGROUP BY time($interval),\"host\", \"channel\",\"source_host\"",
          "rawQuery": true,
          "refId": "A",
          "resultFormat": "time_series"
        },
        {
          "alias": "$tag_host, $tag_nodeIP Slave SQL Status",
          "datasource": {
            "type": "influxdb",
            "uid": "${InfluxDS}"
          },
          "hide": true,
          "query": "SELECT last(\"slave_Slave_SQL_Running\") AS \"Slave_SQL_Running\" FROM \"mysql\" where $timeFilter and zone = '$zone' group by time(1m), host, nodeIP\n",
          "rawQuery": true,
          "refId": "B",
          "resultFormat": "time_series"
        }
      ],
      "type": "stat"
    },
    {
      "datasource": {
        "type": "influxdb",
        "uid": "${DS_DALLAS_SEC}"
      },
      "description": "## Full Table Scans Per Minute\n\n**What it shows:** Number of queries performing full table scans (reading entire table without using index).\n\n**Healthy Range:**\n- Optimal: <10/min\n- Acceptable: 10-100/min\n- Warning: 100-1000/min\n- Critical: >1000/min\n\n**Why It Matters:** Full table scans are expensive operations that:\n- Read all rows in a table\n- Cause high disk I/O\n- Increase query execution time\n- Impact buffer pool efficiency\n\n**When Full Scans Are OK:**\n- Small tables (<1000 rows)\n- Administrative queries (SHOW, INFORMATION_SCHEMA)\n- Intentional data exports\n- Analytics queries on small datasets\n\n**Troubleshooting:**\n\n**High Full Scan Rate (>100/min):**\n\n**Step 1: Identify Queries**\n```sql\n-- Find queries doing full scans\nSELECT query_sample_text, count_star, \n       sum_no_index_used, sum_no_good_index_used\nFROM performance_schema.events_statements_summary_by_digest\nWHERE sum_no_index_used > 0 OR sum_no_good_index_used > 0\nORDER BY sum_no_index_used DESC LIMIT 10;\n\nCheck Missing Indexes\n\n-- Tables with missing indexes\nSELECT object_schema, object_name, count_star\nFROM performance_schema.table_io_waits_summary_by_index_usage\nWHERE index_name IS NULL\nAND count_star > 0\nAND object_schema NOT IN ('mysql', 'performance_schema')\nORDER BY count_star DESC;\n\nAnalyze Table Structure\n\nSHOW CREATE TABLE table_name;\nSHOW INDEX FROM table_name;\n\n-- Check table size\nSELECT table_name, table_rows, \n       ROUND(data_length/1024/1024, 2) AS data_mb\nFROM information_schema.tables\nWHERE table_schema = 'your_database'\nORDER BY data_length DESC;\n\nAdd Appropriate Indexes\n\n-- For WHERE clauses\nALTER TABLE table_name ADD INDEX idx_column (column_name);\n\n-- For composite conditions\nALTER TABLE table_name ADD INDEX idx_multi (col1, col2, col3);\n\n-- For JOIN conditions\nALTER TABLE table_name ADD INDEX idx_fk (foreign_key_column);\n\n-- For covering index (best performance)\nALTER TABLE table_name ADD INDEX idx_covering (where_col, select_col1, select_col2);",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green"
              },
              {
                "color": "#EAB839",
                "value": 10
              },
              {
                "color": "#EF843C",
                "value": 100
              },
              {
                "color": "red",
                "value": 1000
              }
            ]
          }
        },
        "overrides": []
      },
      "gridPos": {
        "h": 2,
        "w": 4,
        "x": 9,
        "y": 7
      },
      "id": 93,
      "options": {
        "colorMode": "background",
        "graphMode": "area",
        "justifyMode": "auto",
        "orientation": "auto",
        "percentChangeColorMode": "standard",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "",
          "values": false
        },
        "showPercentChange": false,
        "textMode": "auto",
        "wideLayout": true
      },
      "pluginVersion": "12.0.2",
      "targets": [
        {
          "alias": "Full Table Scans / Min",
          "datasource": {
            "type": "influxdb",
            "uid": "${DS_DALLAS_PRI}"
          },
          "query": "SELECT derivative(mean(\"select_scan\"), 1m) AS \"full_scans_per_min\"\nFROM \"mysql_queries\" \nWHERE (\"zone\" =~ /^$zone$/ AND \"host\" =~ /^$host$/) AND $timeFilter \nGROUP BY time($interval) fill(null)",
          "rawQuery": true,
          "refId": "A",
          "resultFormat": "time_series"
        }
      ],
      "type": "stat"
    },
    {
      "datasource": {
        "type": "influxdb",
        "uid": "${InfluxDS}"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "decimals": 1,
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "semi-dark-red"
              },
              {
                "color": "#EAB839",
                "value": 85
              },
              {
                "color": "semi-dark-orange",
                "value": 90
              },
              {
                "color": "semi-dark-green",
                "value": 95
              }
            ]
          },
          "unit": "percent"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 4,
        "w": 4,
        "x": 0,
        "y": 8
      },
      "id": 126,
      "options": {
        "colorMode": "background",
        "graphMode": "area",
        "justifyMode": "auto",
        "orientation": "auto",
        "percentChangeColorMode": "standard",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "",
          "values": false
        },
        "showPercentChange": false,
        "textMode": "auto",
        "wideLayout": true
      },
      "pluginVersion": "12.0.2",
      "targets": [
        {
          "alias": "Table Cache Hit Ratio",
          "datasource": {
            "type": "influxdb",
            "uid": "${DS_DALLAS_SEC}"
          },
          "query": "SELECT last(\"table_cache_hit_ratio\") AS \"Table Cache Hit Ratio\"\nFROM \"mysql_table_cache\"  \nWHERE (\"zone\" =~ /^$zone$/ AND \"host\" =~ /^$host$/) AND $timeFilter \nGROUP BY time($interval),\"host\"",
          "rawQuery": true,
          "refId": "A",
          "resultFormat": "time_series"
        }
      ],
      "type": "stat"
    },
    {
      "datasource": {
        "type": "influxdb",
        "uid": "${InfluxDS}"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "#249f14"
              },
              {
                "color": "#EAB839",
                "value": 3
              },
              {
                "color": "#EF843C",
                "value": 5
              },
              {
                "color": "red",
                "value": 10
              }
            ]
          },
          "unit": "none"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 3,
        "w": 4,
        "x": 9,
        "y": 9
      },
      "id": 143,
      "options": {
        "colorMode": "background",
        "graphMode": "area",
        "justifyMode": "auto",
        "orientation": "auto",
        "percentChangeColorMode": "standard",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "",
          "values": false
        },
        "showPercentChange": false,
        "textMode": "auto",
        "wideLayout": true
      },
      "pluginVersion": "12.0.2",
      "targets": [
        {
          "alias": "Current Lock Waits",
          "datasource": {
            "type": "influxdb",
            "uid": "${DS_DALLAS_SEC}"
          },
          "query": "SELECT last(\"innodb_row_lock_current_waits\") AS \"Current Lock Waits\"\nFROM \"mysql_locks\" \nWHERE (\"zone\" =~ /^$zone$/ AND \"host\" =~ /^$host$/) AND $timeFilter \nGROUP BY \"host\"",
          "rawQuery": true,
          "refId": "A",
          "resultFormat": "table"
        }
      ],
      "type": "stat"
    },
    {
      "datasource": {
        "type": "influxdb",
        "uid": "${InfluxDS}"
      },
      "description": "## InnoDB Deadlocks Per Minute ðŸ”´\n\n**What it shows:** Rate of deadlock occurrences in InnoDB engine.\n\n**Healthy Range:**\n- ðŸŸ¢ Excellent: 0/min\n- ðŸŸ¡ Acceptable: <1/min (occasional)\n- ðŸŸ  Warning: 1-5/min\n- ðŸ”´ Critical: >5/min\n\n**What is a Deadlock:**\nA deadlock occurs when two or more transactions are waiting for each other to release locks, creating a circular dependency that cannot be resolved.\n\nExample:\nTransaction 1: Locks Row A, wants Row B\nTransaction 2: Locks Row B, wants Row A\nResult: Deadlock! One transaction must be rolled back.\n\n**Troubleshooting:**\n\n**High Deadlock Rate (>1/min):**\n\n**Step 1: View Recent Deadlocks**\n```sql\n-- See latest deadlock info\nSHOW ENGINE INNODB STATUS\\G\n\n-- Look for section:\n-- ------------------------\n-- LATEST DETECTED DEADLOCK\n-- ------------------------\n\nEnable Deadlock Logging\n-- Enable in my.cnf\n[mysqld]\ninnodb_print_all_deadlocks = 1\n\n-- This logs all deadlocks to error log\n# tail -f /var/log/mysql/error.log | grep -i deadlock\n\nAnalyze Deadlock Pattern\n-- Identify tables involved\n-- Check error log for pattern like:\n-- *** (1) TRANSACTION:\n-- TRANSACTION 12345, ACTIVE 2 sec starting index read\n-- mysql tables in use 1, locked 1\n-- LOCK WAIT 3 lock struct(s), heap size 1136, 2 row lock(s)\n-- MySQL thread id 123, query id 456 localhost user\n-- UPDATE table_name SET col1 = 'value' WHERE id = 1\n\n",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "decimals": 0,
          "mappings": [],
          "max": 120,
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "semi-dark-green"
              },
              {
                "color": "#EAB839",
                "value": 1
              },
              {
                "color": "#c04a07",
                "value": 5
              },
              {
                "color": "semi-dark-red",
                "value": 7
              }
            ]
          },
          "unit": "none"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 3,
        "w": 3,
        "x": 13,
        "y": 9
      },
      "id": 95,
      "options": {
        "colorMode": "background",
        "graphMode": "area",
        "justifyMode": "auto",
        "orientation": "auto",
        "percentChangeColorMode": "standard",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "",
          "values": false
        },
        "showPercentChange": false,
        "textMode": "auto",
        "wideLayout": true
      },
      "pluginVersion": "12.0.2",
      "targets": [
        {
          "alias": "Buffer Pool Wait Free",
          "datasource": {
            "type": "influxdb",
            "uid": "${DS_DALLAS_PRI}"
          },
          "query": "SELECT derivative(mean(\"innodb_deadlocks\"), 1m) AS \"deadlocks_per_min\"\nFROM \"mysql_locks\" \nWHERE (\"zone\" =~ /^$zone$/ AND \"host\" =~ /^$host$/) AND $timeFilter \nGROUP BY time($interval) fill(null)",
          "rawQuery": true,
          "refId": "A",
          "resultFormat": "table"
        }
      ],
      "type": "stat"
    },
    {
      "datasource": {
        "type": "influxdb",
        "uid": "${InfluxDS}"
      },
      "description": "Explanation: This metric tracks the number of slow queries (queries that take longer than a predefined threshold). A high number of slow queries can indicate performance bottlenecks in your database.",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green"
              },
              {
                "color": "#EAB839",
                "value": 100
              },
              {
                "color": "#EF843C",
                "value": 150
              },
              {
                "color": "red",
                "value": 170
              }
            ]
          },
          "unit": "none"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 3,
        "w": 4,
        "x": 16,
        "y": 9
      },
      "id": 90,
      "options": {
        "colorMode": "background",
        "graphMode": "area",
        "justifyMode": "auto",
        "orientation": "auto",
        "percentChangeColorMode": "standard",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "",
          "values": false
        },
        "showPercentChange": false,
        "textMode": "auto",
        "wideLayout": true
      },
      "pluginVersion": "12.0.2",
      "targets": [
        {
          "alias": "Threads Connected",
          "datasource": {
            "type": "influxdb",
            "uid": "${DS_DALLAS_PRI}"
          },
          "query": "SELECT mean(\"threads_connected\") \nFROM \"mysql_connections\" \nWHERE (\"zone\" =~ /^$zone$/ AND \"host\" =~ /^$host$/) AND $timeFilter \nGROUP BY time($interval) fill(null)",
          "rawQuery": true,
          "refId": "A",
          "resultFormat": "time_series"
        }
      ],
      "type": "stat"
    },
    {
      "datasource": {
        "type": "influxdb",
        "uid": "${InfluxDS}"
      },
      "description": "## Queries Per Second (QPS)\n\n**What it shows:** Total number of queries executed per second across all types.\n\n**Healthy Range:**\n- Small DB: 100-1,000 QPS\n- Medium DB: 1,000-10,000 QPS\n- Large DB: >10,000 QPS\n\n**What to Watch:**\n- **Sudden Spikes:** May indicate traffic surge or runaway query\n- **Sudden Drops:** Could mean application issues or connection problems\n- **Gradual Increase:** Normal growth pattern (good!)\n- **High Variability:** Indicates inconsistent load\n\n**Baseline:** Establish your normal QPS during peak/off-peak hours\n\n**Troubleshooting:**\n\n**Unexpected Spike in QPS:**\n1. Check for application deployments or changes\n2. Identify top queries:\n```sql\n   SELECT digest_text, count_star, avg_timer_wait/1000000000000 AS avg_sec\n   FROM performance_schema.events_statements_summary_by_digest\n   ORDER BY count_star DESC LIMIT 10;",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green"
              },
              {
                "color": "#EAB839",
                "value": 2500
              },
              {
                "color": "#EF843C",
                "value": 5000
              },
              {
                "color": "red",
                "value": 7500
              }
            ]
          },
          "unit": "none"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 3,
        "w": 4,
        "x": 20,
        "y": 9
      },
      "id": 54,
      "options": {
        "colorMode": "background",
        "graphMode": "area",
        "justifyMode": "auto",
        "orientation": "auto",
        "percentChangeColorMode": "standard",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "",
          "values": false
        },
        "showPercentChange": false,
        "textMode": "auto",
        "wideLayout": true
      },
      "pluginVersion": "12.0.2",
      "targets": [
        {
          "alias": "QPS",
          "datasource": {
            "type": "influxdb",
            "uid": "${DS_DALLAS_PRI}"
          },
          "hide": false,
          "query": "SELECT derivative(mean(\"queries\"), 1s) AS \"QPS\"\nFROM \"mysql_queries\" \nWHERE (\"zone\" =~ /^$zone$/ AND \"host\" =~ /^$host$/) AND $timeFilter \nGROUP BY time(1s) fill(null)",
          "rawQuery": true,
          "refId": "B",
          "resultFormat": "time_series"
        }
      ],
      "type": "stat"
    },
    {
      "collapsed": false,
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 12
      },
      "id": 146,
      "panels": [],
      "title": "BinLog Metrics",
      "type": "row"
    },
    {
      "datasource": {
        "type": "influxdb",
        "uid": "${InfluxDS}"
      },
      "description": "High disk use = increase binlog_cache_size",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "palette-classic"
          },
          "custom": {
            "axisBorderShow": false,
            "axisCenteredZero": false,
            "axisColorMode": "text",
            "axisLabel": "",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "barWidthFactor": 0.6,
            "drawStyle": "line",
            "fillOpacity": 20,
            "gradientMode": "hue",
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "insertNulls": false,
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "scaleDistribution": {
              "type": "linear"
            },
            "showPoints": "auto",
            "spanNulls": false,
            "stacking": {
              "group": "A",
              "mode": "none"
            },
            "thresholdsStyle": {
              "mode": "off"
            }
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green"
              },
              {
                "color": "red",
                "value": 80
              }
            ]
          },
          "unit": "none"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 7,
        "w": 24,
        "x": 0,
        "y": 13
      },
      "id": 140,
      "options": {
        "legend": {
          "calcs": [
            "min",
            "mean",
            "max"
          ],
          "displayMode": "table",
          "placement": "right",
          "showLegend": true
        },
        "tooltip": {
          "hideZeros": false,
          "mode": "single",
          "sort": "none"
        }
      },
      "pluginVersion": "12.0.2",
      "targets": [
        {
          "datasource": {
            "type": "influxdb",
            "uid": "${DS_DALLAS_SEC}"
          },
          "query": "SELECT \n    derivative(mean(\"binlog_cache_use\"), 1s) AS \"Cache Use/s\",\n    derivative(mean(\"binlog_cache_disk_use\"), 1s) AS \"Disk Use/s\"\nFROM \"mysql_binlog\" \nWHERE (\"zone\" =~ /^$zone$/ AND \"host\" =~ /^$host$/) AND $timeFilter \nGROUP BY time($interval), \"host\" fill(null)",
          "rawQuery": true,
          "refId": "A",
          "resultFormat": "table"
        }
      ],
      "title": "Binlog Cache Usage ",
      "type": "timeseries"
    },
    {
      "collapsed": false,
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 20
      },
      "id": 131,
      "panels": [],
      "title": "Sort & Handlers Metrics",
      "type": "row"
    },
    {
      "datasource": {
        "type": "influxdb",
        "uid": "${InfluxDS}"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "palette-classic"
          },
          "custom": {
            "axisBorderShow": false,
            "axisCenteredZero": false,
            "axisColorMode": "text",
            "axisLabel": "",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "barWidthFactor": 0.6,
            "drawStyle": "line",
            "fillOpacity": 0,
            "gradientMode": "none",
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "insertNulls": false,
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "scaleDistribution": {
              "type": "linear"
            },
            "showPoints": "auto",
            "spanNulls": false,
            "stacking": {
              "group": "A",
              "mode": "none"
            },
            "thresholdsStyle": {
              "mode": "off"
            }
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green"
              },
              {
                "color": "red",
                "value": 80
              }
            ]
          },
          "unit": "none"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 9,
        "w": 8,
        "x": 0,
        "y": 21
      },
      "id": 147,
      "options": {
        "legend": {
          "calcs": [
            "min",
            "mean",
            "max"
          ],
          "displayMode": "table",
          "placement": "bottom",
          "showLegend": true
        },
        "tooltip": {
          "hideZeros": false,
          "mode": "single",
          "sort": "none"
        }
      },
      "pluginVersion": "12.0.2",
      "targets": [
        {
          "datasource": {
            "type": "influxdb",
            "uid": "${DS_DALLAS_SEC}"
          },
          "query": "SELECT \n    derivative(mean(\"sort_range\"), 1s) AS \"Range Sorts/s\",\n    derivative(mean(\"sort_scan\"), 1s) AS \"Scan Sorts/s\"\nFROM \"mysql_sorts\" \nWHERE (\"zone\" =~ /^$zone$/ AND \"host\" =~ /^$host$/) AND $timeFilter \nGROUP BY time($interval), \"host\" fill(null)",
          "rawQuery": true,
          "refId": "A",
          "resultFormat": "table"
        }
      ],
      "title": "SORT Operations",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "influxdb",
        "uid": "${InfluxDS}"
      },
      "description": "Alert if >0 (indicates insufficient sort_buffer_size)",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "palette-classic"
          },
          "custom": {
            "axisBorderShow": false,
            "axisCenteredZero": false,
            "axisColorMode": "text",
            "axisLabel": "",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "barWidthFactor": 0.6,
            "drawStyle": "line",
            "fillOpacity": 18,
            "gradientMode": "none",
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "insertNulls": false,
            "lineInterpolation": "smooth",
            "lineWidth": 1,
            "pointSize": 5,
            "scaleDistribution": {
              "type": "linear"
            },
            "showPoints": "auto",
            "spanNulls": false,
            "stacking": {
              "group": "A",
              "mode": "none"
            },
            "thresholdsStyle": {
              "mode": "off"
            }
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green"
              },
              {
                "color": "#EAB839",
                "value": 1
              },
              {
                "color": "#EF843C",
                "value": 3
              },
              {
                "color": "red",
                "value": 5
              }
            ]
          },
          "unit": "none"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 9,
        "w": 8,
        "x": 8,
        "y": 21
      },
      "id": 134,
      "options": {
        "legend": {
          "calcs": [
            "min",
            "mean",
            "max"
          ],
          "displayMode": "table",
          "placement": "bottom",
          "showLegend": true
        },
        "tooltip": {
          "hideZeros": false,
          "mode": "single",
          "sort": "none"
        }
      },
      "pluginVersion": "12.0.2",
      "targets": [
        {
          "datasource": {
            "type": "influxdb",
            "uid": "${DS_DALLAS_SEC}"
          },
          "query": "SELECT derivative(mean(\"sort_merge_passes\"), 1m) AS \"merge_passes_per_min\"\nFROM \"mysql_sorts\" \nWHERE (\"zone\" =~ /^$zone$/ AND \"host\" =~ /^$host$/) AND $timeFilter \nGROUP BY time($interval), \"host\" fill(null)",
          "rawQuery": true,
          "refId": "A",
          "resultFormat": "table"
        }
      ],
      "title": "Sort Merge Passes",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "influxdb",
        "uid": "${InfluxDS}"
      },
      "description": "Note: High \"Read Random\" may indicate missing indexes",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "palette-classic"
          },
          "custom": {
            "axisBorderShow": false,
            "axisCenteredZero": false,
            "axisColorMode": "text",
            "axisLabel": "",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "barWidthFactor": 0.6,
            "drawStyle": "line",
            "fillOpacity": 18,
            "gradientMode": "none",
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "insertNulls": false,
            "lineInterpolation": "smooth",
            "lineWidth": 1,
            "pointSize": 5,
            "scaleDistribution": {
              "type": "linear"
            },
            "showPoints": "auto",
            "spanNulls": false,
            "stacking": {
              "group": "A",
              "mode": "none"
            },
            "thresholdsStyle": {
              "mode": "off"
            }
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green"
              },
              {
                "color": "#EAB839",
                "value": 1
              },
              {
                "color": "#EF843C",
                "value": 3
              },
              {
                "color": "red",
                "value": 5
              }
            ]
          },
          "unit": "none"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 9,
        "w": 8,
        "x": 16,
        "y": 21
      },
      "id": 135,
      "options": {
        "legend": {
          "calcs": [
            "min",
            "mean",
            "max"
          ],
          "displayMode": "table",
          "placement": "bottom",
          "showLegend": true
        },
        "tooltip": {
          "hideZeros": false,
          "mode": "single",
          "sort": "none"
        }
      },
      "pluginVersion": "12.0.2",
      "targets": [
        {
          "datasource": {
            "type": "influxdb",
            "uid": "${DS_DALLAS_SEC}"
          },
          "query": "SELECT \n    derivative(mean(\"handler_read_key\"), 1s) AS \"Read Key/s\",\n    derivative(mean(\"handler_read_next\"), 1s) AS \"Read Next/s\",\n    derivative(mean(\"handler_read_rnd\"), 1s) AS \"Read Random/s\"\nFROM \"mysql_handlers\" \nWHERE (\"zone\" =~ /^$zone$/ AND \"host\" =~ /^$host$/) AND $timeFilter \nGROUP BY time($interval), \"host\" fill(null)",
          "rawQuery": true,
          "refId": "A",
          "resultFormat": "table"
        }
      ],
      "title": "Handler Read Operations",
      "type": "timeseries"
    },
    {
      "collapsed": false,
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 30
      },
      "id": 123,
      "panels": [],
      "title": "Table Cache",
      "type": "row"
    },
    {
      "datasource": {
        "type": "influxdb",
        "uid": "${InfluxDS}"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "decimals": 1,
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "semi-dark-red"
              },
              {
                "color": "#EAB839",
                "value": 85
              },
              {
                "color": "semi-dark-orange",
                "value": 90
              },
              {
                "color": "semi-dark-green",
                "value": 95
              }
            ]
          },
          "unit": "percent"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 4,
        "w": 4,
        "x": 6,
        "y": 31
      },
      "id": 132,
      "options": {
        "colorMode": "background",
        "graphMode": "area",
        "justifyMode": "auto",
        "orientation": "auto",
        "percentChangeColorMode": "standard",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "",
          "values": false
        },
        "showPercentChange": false,
        "textMode": "auto",
        "wideLayout": true
      },
      "pluginVersion": "12.0.2",
      "targets": [
        {
          "alias": "Table Cache Hit Ratio",
          "datasource": {
            "type": "influxdb",
            "uid": "${DS_DALLAS_SEC}"
          },
          "query": "SELECT last(\"table_cache_hit_ratio\") AS \"Table Cache Hit Ratio\"\nFROM \"mysql_table_cache\"  \nWHERE (\"zone\" =~ /^$zone$/ AND \"host\" =~ /^$host$/) AND $timeFilter \nGROUP BY \"host\"",
          "rawQuery": true,
          "refId": "A",
          "resultFormat": "table"
        }
      ],
      "type": "stat"
    },
    {
      "datasource": {
        "type": "influxdb",
        "uid": "${InfluxDS}"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "decimals": 1,
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green"
              },
              {
                "color": "#EAB839",
                "value": 25
              },
              {
                "color": "#EF843C",
                "value": 50
              },
              {
                "color": "red",
                "value": 75
              }
            ]
          },
          "unit": "percent"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 4,
        "w": 5,
        "x": 13,
        "y": 31
      },
      "id": 128,
      "options": {
        "minVizHeight": 75,
        "minVizWidth": 75,
        "orientation": "auto",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "",
          "values": false
        },
        "showThresholdLabels": false,
        "showThresholdMarkers": true,
        "sizing": "auto"
      },
      "pluginVersion": "12.0.2",
      "targets": [
        {
          "alias": "Temp Tables on Disk Percentage ",
          "datasource": {
            "type": "influxdb",
            "uid": "${DS_DALLAS_SEC}"
          },
          "query": "SELECT last(\"tmp_disk_pct\") \nFROM \"mysql_temp_tables\" \nWHERE (\"zone\" =~ /^$zone$/ AND \"host\" =~ /^$host$/) AND $timeFilter \nGROUP BY \"host\"",
          "rawQuery": true,
          "refId": "A",
          "resultFormat": "table"
        }
      ],
      "title": "Temp Tables on Disk Percentage ",
      "type": "gauge"
    },
    {
      "datasource": {
        "type": "influxdb",
        "uid": "${InfluxDS}"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "palette-classic"
          },
          "custom": {
            "axisBorderShow": false,
            "axisCenteredZero": false,
            "axisColorMode": "text",
            "axisLabel": "",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "barWidthFactor": 0.6,
            "drawStyle": "line",
            "fillOpacity": 0,
            "gradientMode": "none",
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "insertNulls": false,
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "scaleDistribution": {
              "type": "linear"
            },
            "showPoints": "auto",
            "spanNulls": false,
            "stacking": {
              "group": "A",
              "mode": "none"
            },
            "thresholdsStyle": {
              "mode": "off"
            }
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green"
              },
              {
                "color": "red",
                "value": 80
              }
            ]
          },
          "unit": "none"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 8,
        "w": 8,
        "x": 0,
        "y": 35
      },
      "id": 133,
      "options": {
        "legend": {
          "calcs": [
            "min",
            "mean",
            "max"
          ],
          "displayMode": "table",
          "placement": "bottom",
          "showLegend": true
        },
        "tooltip": {
          "hideZeros": false,
          "mode": "single",
          "sort": "none"
        }
      },
      "pluginVersion": "12.0.2",
      "targets": [
        {
          "datasource": {
            "type": "influxdb",
            "uid": "${DS_DALLAS_SEC}"
          },
          "query": "SELECT \n    mean(\"open_tables\") AS \"Open\",\n    mean(\"table_open_cache\") AS \"Cache Size\"\nFROM \"mysql_table_cache\" \nWHERE (\"zone\" =~ /^$zone$/ AND \"host\" =~ /^$host$/) AND $timeFilter \nGROUP BY time($interval), \"host\" fill(null)",
          "rawQuery": true,
          "refId": "A",
          "resultFormat": "table"
        }
      ],
      "title": "Open Tables",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "influxdb",
        "uid": "${InfluxDS}"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "palette-classic"
          },
          "custom": {
            "axisBorderShow": false,
            "axisCenteredZero": false,
            "axisColorMode": "text",
            "axisLabel": "",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "barWidthFactor": 0.6,
            "drawStyle": "line",
            "fillOpacity": 0,
            "gradientMode": "none",
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "insertNulls": false,
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "scaleDistribution": {
              "type": "linear"
            },
            "showPoints": "auto",
            "spanNulls": false,
            "stacking": {
              "group": "A",
              "mode": "none"
            },
            "thresholdsStyle": {
              "mode": "off"
            }
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green"
              },
              {
                "color": "red",
                "value": 80
              }
            ]
          },
          "unit": "cps"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 8,
        "w": 8,
        "x": 8,
        "y": 35
      },
      "id": 127,
      "options": {
        "legend": {
          "calcs": [
            "min",
            "mean",
            "max"
          ],
          "displayMode": "table",
          "placement": "bottom",
          "showLegend": true
        },
        "tooltip": {
          "hideZeros": false,
          "mode": "single",
          "sort": "none"
        }
      },
      "pluginVersion": "12.0.2",
      "targets": [
        {
          "datasource": {
            "type": "influxdb",
            "uid": "${DS_DALLAS_SEC}"
          },
          "query": "SELECT derivative(mean(\"table_locks_waited\"), 1s) AS \"locks_waited_per_sec\"\nFROM \"mysql_table_cache\" \nWHERE (\"zone\" =~ /^$zone$/ AND \"host\" =~ /^$host$/) AND $timeFilter \nGROUP BY time($interval), \"host\" fill(null)",
          "rawQuery": true,
          "refId": "A",
          "resultFormat": "table"
        }
      ],
      "title": "Table Locks Waited",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "influxdb",
        "uid": "${InfluxDS}"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "palette-classic"
          },
          "custom": {
            "axisBorderShow": false,
            "axisCenteredZero": false,
            "axisColorMode": "text",
            "axisLabel": "",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "barWidthFactor": 0.6,
            "drawStyle": "line",
            "fillOpacity": 0,
            "gradientMode": "none",
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "insertNulls": false,
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "scaleDistribution": {
              "type": "linear"
            },
            "showPoints": "auto",
            "spanNulls": false,
            "stacking": {
              "group": "A",
              "mode": "none"
            },
            "thresholdsStyle": {
              "mode": "off"
            }
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green"
              },
              {
                "color": "red",
                "value": 80
              }
            ]
          },
          "unit": "Tables/Min"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 8,
        "w": 8,
        "x": 16,
        "y": 35
      },
      "id": 130,
      "options": {
        "legend": {
          "calcs": [
            "min",
            "mean",
            "max"
          ],
          "displayMode": "table",
          "placement": "bottom",
          "showLegend": true
        },
        "tooltip": {
          "hideZeros": false,
          "mode": "single",
          "sort": "none"
        }
      },
      "pluginVersion": "12.0.2",
      "targets": [
        {
          "datasource": {
            "type": "influxdb",
            "uid": "${DS_DALLAS_SEC}"
          },
          "query": "SELECT \n    derivative(mean(\"created_tmp_tables\"), 1m) AS \"Memory Temp Tables/min\",\n    derivative(mean(\"created_tmp_disk_tables\"), 1m) AS \"Disk Temp Tables/min\"\nFROM \"mysql_temp_tables\" \nWHERE (\"zone\" =~ /^$zone$/ AND \"host\" =~ /^$host$/) AND $timeFilter \nGROUP BY time($interval), \"host\" fill(null)",
          "rawQuery": true,
          "refId": "A",
          "resultFormat": "table"
        }
      ],
      "title": "Temp Tables Created",
      "type": "timeseries"
    },
    {
      "collapsed": false,
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 43
      },
      "id": 112,
      "panels": [],
      "title": "Throughput Metrics",
      "type": "row"
    },
    {
      "datasource": {
        "type": "influxdb",
        "uid": "${InfluxDS}"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "palette-classic"
          },
          "custom": {
            "axisBorderShow": false,
            "axisCenteredZero": false,
            "axisColorMode": "text",
            "axisLabel": "",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "barWidthFactor": 0.6,
            "drawStyle": "line",
            "fillOpacity": 18,
            "gradientMode": "none",
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "insertNulls": false,
            "lineInterpolation": "smooth",
            "lineWidth": 1,
            "pointSize": 5,
            "scaleDistribution": {
              "type": "linear"
            },
            "showPoints": "auto",
            "spanNulls": false,
            "stacking": {
              "group": "A",
              "mode": "normal"
            },
            "thresholdsStyle": {
              "mode": "off"
            }
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green"
              },
              {
                "color": "red",
                "value": 80
              }
            ]
          }
        },
        "overrides": []
      },
      "gridPos": {
        "h": 10,
        "w": 8,
        "x": 0,
        "y": 44
      },
      "id": 113,
      "options": {
        "legend": {
          "calcs": [
            "min",
            "mean",
            "max"
          ],
          "displayMode": "table",
          "placement": "bottom",
          "showLegend": true
        },
        "tooltip": {
          "hideZeros": false,
          "mode": "single",
          "sort": "none"
        }
      },
      "pluginVersion": "12.0.2",
      "targets": [
        {
          "datasource": {
            "type": "influxdb",
            "uid": "${DS_DALLAS_SEC}"
          },
          "query": "SELECT \n    derivative(mean(\"com_select\"), 1s) AS \"SELECT/s\",\n    derivative(mean(\"com_insert\"), 1s) AS \"INSERT/s\",\n    derivative(mean(\"com_update\"), 1s) AS \"UPDATE/s\",\n    derivative(mean(\"com_delete\"), 1s) AS \"DELETE/s\"\nFROM \"mysql_throughput\" \nWHERE (\"zone\" =~ /^$zone$/ AND \"host\" =~ /^$host$/) AND $timeFilter \nGROUP BY time($interval), \"host\" fill(null)",
          "rawQuery": true,
          "refId": "A",
          "resultFormat": "table"
        }
      ],
      "title": "Operations Per Second by Type ",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "influxdb",
        "uid": "${InfluxDS}"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "palette-classic"
          },
          "custom": {
            "axisBorderShow": false,
            "axisCenteredZero": false,
            "axisColorMode": "text",
            "axisLabel": "",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "barWidthFactor": 0.6,
            "drawStyle": "line",
            "fillOpacity": 18,
            "gradientMode": "none",
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "insertNulls": false,
            "lineInterpolation": "smooth",
            "lineWidth": 1,
            "pointSize": 5,
            "scaleDistribution": {
              "type": "linear"
            },
            "showPoints": "auto",
            "spanNulls": false,
            "stacking": {
              "group": "A",
              "mode": "none"
            },
            "thresholdsStyle": {
              "mode": "off"
            }
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green"
              },
              {
                "color": "red",
                "value": 80
              }
            ]
          },
          "unit": "bytes"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 10,
        "w": 8,
        "x": 8,
        "y": 44
      },
      "id": 114,
      "options": {
        "legend": {
          "calcs": [
            "min",
            "mean",
            "max"
          ],
          "displayMode": "table",
          "placement": "bottom",
          "showLegend": true
        },
        "tooltip": {
          "hideZeros": false,
          "mode": "single",
          "sort": "none"
        }
      },
      "pluginVersion": "12.0.2",
      "targets": [
        {
          "datasource": {
            "type": "influxdb",
            "uid": "${DS_DALLAS_SEC}"
          },
          "query": "SELECT \n    derivative(mean(\"bytes_received\"), 1s) AS \"Bytes Received/s\",\n    derivative(mean(\"bytes_sent\"), 1s) AS \"Bytes Sent/s\"\nFROM \"mysql_throughput\" \nWHERE (\"zone\" =~ /^$zone$/ AND \"host\" =~ /^$host$/) AND $timeFilter \nGROUP BY time($interval), \"host\" fill(null)",
          "rawQuery": true,
          "refId": "A",
          "resultFormat": "table"
        }
      ],
      "title": "Network Throughput",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "influxdb",
        "uid": "${InfluxDS}"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "palette-classic"
          },
          "custom": {
            "axisBorderShow": false,
            "axisCenteredZero": false,
            "axisColorMode": "text",
            "axisLabel": "",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "barWidthFactor": 0.6,
            "drawStyle": "line",
            "fillOpacity": 18,
            "gradientMode": "none",
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "insertNulls": false,
            "lineInterpolation": "smooth",
            "lineWidth": 1,
            "pointSize": 5,
            "scaleDistribution": {
              "type": "linear"
            },
            "showPoints": "auto",
            "spanNulls": false,
            "stacking": {
              "group": "A",
              "mode": "none"
            },
            "thresholdsStyle": {
              "mode": "off"
            }
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green"
              },
              {
                "color": "red",
                "value": 80
              }
            ]
          },
          "unit": "bytes"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 10,
        "w": 8,
        "x": 16,
        "y": 44
      },
      "id": 116,
      "options": {
        "legend": {
          "calcs": [
            "min",
            "mean",
            "max"
          ],
          "displayMode": "table",
          "placement": "bottom",
          "showLegend": true
        },
        "tooltip": {
          "hideZeros": false,
          "mode": "single",
          "sort": "none"
        }
      },
      "pluginVersion": "12.0.2",
      "targets": [
        {
          "datasource": {
            "type": "influxdb",
            "uid": "${DS_DALLAS_SEC}"
          },
          "query": "SELECT \n    derivative(mean(\"com_commit\"), 1s) AS \"Commits/s\",\n    derivative(mean(\"com_rollback\"), 1s) AS \"Rollbacks/s\"\nFROM \"mysql_throughput\" \nWHERE (\"zone\" =~ /^$zone$/ AND \"host\" =~ /^$host$/) AND $timeFilter \nGROUP BY time($interval), \"host\" fill(null)",
          "rawQuery": true,
          "refId": "A",
          "resultFormat": "table"
        }
      ],
      "title": "Transacation Rate",
      "type": "timeseries"
    },
    {
      "collapsed": false,
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 54
      },
      "id": 106,
      "panels": [],
      "title": "Replication Stats",
      "type": "row"
    },
    {
      "datasource": {
        "type": "influxdb",
        "uid": "${InfluxDS}"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "mappings": [
            {
              "options": {
                "0": {
                  "color": "semi-dark-red",
                  "index": 1,
                  "text": "No"
                },
                "1": {
                  "color": "#229113",
                  "index": 0,
                  "text": "Yes"
                }
              },
              "type": "value"
            }
          ],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "#1a6e0f"
              },
              {
                "color": "red",
                "value": 80
              }
            ]
          }
        },
        "overrides": []
      },
      "gridPos": {
        "h": 5,
        "w": 5,
        "x": 0,
        "y": 55
      },
      "id": 96,
      "options": {
        "colorMode": "background",
        "graphMode": "area",
        "justifyMode": "auto",
        "orientation": "horizontal",
        "percentChangeColorMode": "standard",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "",
          "values": false
        },
        "showPercentChange": false,
        "text": {
          "titleSize": 12,
          "valueSize": 14
        },
        "textMode": "auto",
        "wideLayout": true
      },
      "pluginVersion": "12.0.2",
      "targets": [
        {
          "alias": "Replication Stats - $tag_channel",
          "datasource": {
            "type": "influxdb",
            "uid": "${DS_DALLAS_SEC}"
          },
          "query": "SELECT last(\"replication_healthy\") \nFROM \"mysql_replica_status\" \nWHERE (\"zone\" =~ /^$zone$/ AND \"host\" =~ /^$host$/) AND $timeFilter \nGROUP BY \"host\", \"channel\"",
          "rawQuery": true,
          "refId": "A",
          "resultFormat": "time_series"
        }
      ],
      "type": "stat"
    },
    {
      "datasource": {
        "type": "influxdb",
        "uid": "${InfluxDS}"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "#1a6e0f"
              },
              {
                "color": "#EAB839",
                "value": 10
              },
              {
                "color": "#EF843C",
                "value": 60
              },
              {
                "color": "red",
                "value": 70
              }
            ]
          },
          "unit": "s"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 5,
        "w": 6,
        "x": 5,
        "y": 55
      },
      "id": 99,
      "options": {
        "colorMode": "background",
        "graphMode": "area",
        "justifyMode": "auto",
        "orientation": "horizontal",
        "percentChangeColorMode": "standard",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "",
          "values": false
        },
        "showPercentChange": false,
        "text": {
          "titleSize": 12,
          "valueSize": 14
        },
        "textMode": "auto",
        "wideLayout": true
      },
      "pluginVersion": "12.0.2",
      "targets": [
        {
          "alias": "Seconds Behind Source - $tag_channel",
          "datasource": {
            "type": "influxdb",
            "uid": "${DS_DALLAS_SEC}"
          },
          "query": "SELECT mean(\"seconds_behind_source\") AS \"Seconds Behind Source\"\nFROM \"mysql_replica_status\" \nWHERE (\"zone\" =~ /^$zone$/ AND \"host\" =~ /^$host$/) AND $timeFilter \nGROUP BY time($interval), \"host\", \"channel\" fill(null)",
          "rawQuery": true,
          "refId": "A",
          "resultFormat": "time_series"
        }
      ],
      "type": "stat"
    },
    {
      "datasource": {
        "type": "influxdb",
        "uid": "${InfluxDS}"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "#208412"
              },
              {
                "color": "#EAB839",
                "value": 10000000
              },
              {
                "color": "semi-dark-red",
                "value": 1000000000
              }
            ]
          },
          "unit": "bytes"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 5,
        "w": 5,
        "x": 11,
        "y": 55
      },
      "id": 97,
      "options": {
        "colorMode": "background",
        "graphMode": "area",
        "justifyMode": "auto",
        "orientation": "horizontal",
        "percentChangeColorMode": "standard",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "",
          "values": false
        },
        "showPercentChange": false,
        "text": {
          "titleSize": 12,
          "valueSize": 14
        },
        "textMode": "auto",
        "wideLayout": true
      },
      "pluginVersion": "12.0.2",
      "targets": [
        {
          "alias": "Replication Lags - $tag_channel",
          "datasource": {
            "type": "influxdb",
            "uid": "${DS_DALLAS_SEC}"
          },
          "query": "SELECT mean(\"replication_lag_bytes\") \nFROM \"mysql_replica_status\" \nWHERE (\"zone\" =~ /^$zone$/ AND \"host\" =~ /^$host$/) AND $timeFilter \nGROUP BY time($interval), \"host\", \"channel\" fill(null)",
          "rawQuery": true,
          "refId": "A",
          "resultFormat": "time_series"
        }
      ],
      "type": "stat"
    },
    {
      "datasource": {
        "type": "influxdb",
        "uid": "${InfluxDS}"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "mappings": [
            {
              "options": {
                "0": {
                  "color": "semi-dark-red",
                  "index": 0,
                  "text": "Stopped"
                },
                "1": {
                  "color": "#11ab10",
                  "index": 1,
                  "text": "Runnine"
                }
              },
              "type": "value"
            }
          ],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "#1a6e0f"
              },
              {
                "color": "#EAB839",
                "value": 5
              },
              {
                "color": "#cf182e",
                "value": 10
              }
            ]
          }
        },
        "overrides": []
      },
      "gridPos": {
        "h": 5,
        "w": 5,
        "x": 16,
        "y": 55
      },
      "id": 100,
      "options": {
        "colorMode": "background",
        "graphMode": "area",
        "justifyMode": "auto",
        "orientation": "horizontal",
        "percentChangeColorMode": "standard",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "",
          "values": false
        },
        "showPercentChange": false,
        "text": {
          "titleSize": 12,
          "valueSize": 14
        },
        "textMode": "auto",
        "wideLayout": true
      },
      "pluginVersion": "12.0.2",
      "targets": [
        {
          "alias": "$tag_channel - IO_Thread",
          "datasource": {
            "type": "influxdb",
            "uid": "${DS_DALLAS_SEC}"
          },
          "query": "SELECT last(\"io_running\") \nFROM \"mysql_replica_status\" \nWHERE (\"zone\" =~ /^$zone$/ AND \"host\" =~ /^$host$/) AND $timeFilter \nGROUP BY \"channel\"",
          "rawQuery": true,
          "refId": "A",
          "resultFormat": "time_series"
        },
        {
          "alias": "$tag_channel - SQL_Thread",
          "datasource": {
            "type": "influxdb",
            "uid": "${InfluxDS}"
          },
          "hide": false,
          "query": "SELECT last(\"sql_running\") \nFROM \"mysql_replica_status\" \nWHERE (\"zone\" =~ /^$zone$/ AND \"host\" =~ /^$host$/) AND $timeFilter \nGROUP BY  \"channel\"",
          "rawQuery": true,
          "refId": "B",
          "resultFormat": "time_series"
        }
      ],
      "type": "stat"
    },
    {
      "datasource": {
        "type": "influxdb",
        "uid": "${DS_DALLAS_SEC}"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "#1a6e0f"
              },
              {
                "color": "#EAB839",
                "value": 5
              },
              {
                "color": "#cf182e",
                "value": 10
              }
            ]
          }
        },
        "overrides": []
      },
      "gridPos": {
        "h": 2,
        "w": 3,
        "x": 21,
        "y": 55
      },
      "id": 98,
      "options": {
        "colorMode": "background",
        "graphMode": "area",
        "justifyMode": "auto",
        "orientation": "horizontal",
        "percentChangeColorMode": "standard",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "",
          "values": false
        },
        "showPercentChange": false,
        "text": {
          "titleSize": 12,
          "valueSize": 14
        },
        "textMode": "auto",
        "wideLayout": true
      },
      "pluginVersion": "12.0.2",
      "targets": [
        {
          "alias": "Unhealthy Replications Counts",
          "datasource": {
            "type": "influxdb",
            "uid": "${InfluxDS}"
          },
          "query": "SELECT count(\"replication_healthy\") AS \"Unhealthy Replications\"\nFROM \"mysql_replica_status\" \nWHERE (\"zone\" =~ /^$zone$/ AND \"replication_healthy\" = 0) AND $timeFilter",
          "rawQuery": true,
          "refId": "A",
          "resultFormat": "time_series"
        }
      ],
      "type": "stat"
    },
    {
      "datasource": {
        "type": "influxdb",
        "uid": "${DS_DALLAS_SEC}"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "#1a6e0f"
              },
              {
                "color": "semi-dark-yellow",
                "value": 5
              },
              {
                "color": "#cf182e",
                "value": 10
              }
            ]
          }
        },
        "overrides": []
      },
      "gridPos": {
        "h": 3,
        "w": 3,
        "x": 21,
        "y": 57
      },
      "id": 104,
      "options": {
        "colorMode": "background",
        "graphMode": "area",
        "justifyMode": "auto",
        "orientation": "horizontal",
        "percentChangeColorMode": "standard",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "",
          "values": false
        },
        "showPercentChange": false,
        "text": {
          "titleSize": 14,
          "valueSize": 16
        },
        "textMode": "auto",
        "wideLayout": true
      },
      "pluginVersion": "12.0.2",
      "targets": [
        {
          "alias": "Count of hosts with replication problems",
          "datasource": {
            "type": "influxdb",
            "uid": "${InfluxDS}"
          },
          "query": "SELECT count(\"replication_healthy\") AS \"Count of hosts with replication problems\"\nFROM \"mysql_replica_status\" \nWHERE (\"zone\" =~ /^$zone$/ AND \"replication_healthy\" = 0) AND $timeFilter \nGROUP BY time($interval) fill(0)",
          "rawQuery": true,
          "refId": "A",
          "resultFormat": "time_series"
        }
      ],
      "type": "stat"
    },
    {
      "datasource": {
        "type": "influxdb",
        "uid": "${DS_DALLAS_SEC}"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "palette-classic"
          },
          "custom": {
            "axisBorderShow": false,
            "axisCenteredZero": false,
            "axisColorMode": "text",
            "axisLabel": "",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "barWidthFactor": 0.6,
            "drawStyle": "line",
            "fillOpacity": 22,
            "gradientMode": "none",
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "insertNulls": false,
            "lineInterpolation": "smooth",
            "lineWidth": 1,
            "pointSize": 5,
            "scaleDistribution": {
              "type": "linear"
            },
            "showPoints": "auto",
            "spanNulls": false,
            "stacking": {
              "group": "A",
              "mode": "none"
            },
            "thresholdsStyle": {
              "mode": "off"
            }
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "#1a6e0f"
              },
              {
                "color": "red",
                "value": 80
              }
            ]
          },
          "unit": "none"
        },
        "overrides": [
          {
            "matcher": {
              "id": "byFrameRefID",
              "options": "B"
            },
            "properties": [
              {
                "id": "custom.transform",
                "value": "negative-Y"
              }
            ]
          }
        ]
      },
      "gridPos": {
        "h": 9,
        "w": 15,
        "x": 0,
        "y": 60
      },
      "id": 101,
      "options": {
        "legend": {
          "calcs": [
            "min",
            "mean",
            "max"
          ],
          "displayMode": "table",
          "placement": "right",
          "showLegend": true
        },
        "tooltip": {
          "hideZeros": false,
          "mode": "single",
          "sort": "none"
        }
      },
      "pluginVersion": "12.0.2",
      "targets": [
        {
          "alias": "Read Position, $tag_channel",
          "datasource": {
            "type": "influxdb",
            "uid": "${InfluxDS}"
          },
          "query": "SELECT mean(\"read_source_log_pos\") \nFROM \"mysql_replica_status\" \nWHERE (\"zone\" =~ /^$zone$/ AND \"host\" =~ /^$host$/) AND $timeFilter \nGROUP BY time($interval), \"host\", \"channel\" fill(null)",
          "rawQuery": true,
          "refId": "A",
          "resultFormat": "time_series"
        },
        {
          "alias": "Execute Position, $tag_channel",
          "datasource": {
            "type": "influxdb",
            "uid": "${DS_DALLAS_SEC}"
          },
          "hide": false,
          "query": "SELECT mean(\"exec_source_log_pos\") \nFROM \"mysql_replica_status\" \nWHERE (\"zone\" =~ /^$zone$/ AND \"host\" =~ /^$host$/) AND $timeFilter \nGROUP BY time($interval), \"host\", \"channel\" fill(null)",
          "rawQuery": true,
          "refId": "B",
          "resultFormat": "time_series"
        }
      ],
      "title": "Binary Log Position",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "influxdb",
        "uid": "${InfluxDS}"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "palette-classic"
          },
          "custom": {
            "axisBorderShow": false,
            "axisCenteredZero": false,
            "axisColorMode": "text",
            "axisLabel": "",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "barWidthFactor": 0.6,
            "drawStyle": "line",
            "fillOpacity": 22,
            "gradientMode": "none",
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "insertNulls": false,
            "lineInterpolation": "smooth",
            "lineWidth": 1,
            "pointSize": 5,
            "scaleDistribution": {
              "type": "linear"
            },
            "showPoints": "auto",
            "spanNulls": false,
            "stacking": {
              "group": "A",
              "mode": "none"
            },
            "thresholdsStyle": {
              "mode": "off"
            }
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "#1a6e0f"
              },
              {
                "color": "red",
                "value": 80
              }
            ]
          },
          "unit": "bytes"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 9,
        "w": 9,
        "x": 15,
        "y": 60
      },
      "id": 102,
      "options": {
        "legend": {
          "calcs": [
            "min",
            "mean",
            "max"
          ],
          "displayMode": "table",
          "placement": "bottom",
          "showLegend": true
        },
        "tooltip": {
          "hideZeros": false,
          "mode": "single",
          "sort": "none"
        }
      },
      "pluginVersion": "12.0.2",
      "targets": [
        {
          "alias": "$tag_channel",
          "datasource": {
            "type": "influxdb",
            "uid": "${DS_DALLAS_SEC}"
          },
          "query": "SELECT mean(\"relay_log_space\") \nFROM \"mysql_replica_status\" \nWHERE (\"zone\" =~ /^$zone$/ AND \"host\" =~ /^$host$/) AND $timeFilter \nGROUP BY time($interval), \"host\", \"channel\" fill(null)",
          "rawQuery": true,
          "refId": "A",
          "resultFormat": "time_series"
        }
      ],
      "title": "Relay Log Space Usage",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "influxdb",
        "uid": "${InfluxDS}"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "custom": {
            "align": "left",
            "cellOptions": {
              "type": "auto"
            },
            "inspect": false
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green"
              },
              {
                "color": "red",
                "value": 80
              }
            ]
          }
        },
        "overrides": [
          {
            "matcher": {
              "id": "byName",
              "options": "host"
            },
            "properties": [
              {
                "id": "custom.width",
                "value": 186
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "source_host"
            },
            "properties": [
              {
                "id": "custom.width",
                "value": 113
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "channel"
            },
            "properties": [
              {
                "id": "custom.width",
                "value": 91
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "IO"
            },
            "properties": [
              {
                "id": "custom.width",
                "value": 47
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "SQL"
            },
            "properties": [
              {
                "id": "custom.width",
                "value": 72
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Lag(s)"
            },
            "properties": [
              {
                "id": "custom.width",
                "value": 71
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Lag(bytes)"
            },
            "properties": [
              {
                "id": "custom.width",
                "value": 88
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Health"
            },
            "properties": [
              {
                "id": "custom.width",
                "value": 73
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Time"
            },
            "properties": [
              {
                "id": "custom.width",
                "value": 140
              }
            ]
          }
        ]
      },
      "gridPos": {
        "h": 7,
        "w": 12,
        "x": 0,
        "y": 69
      },
      "id": 86,
      "options": {
        "cellHeight": "sm",
        "footer": {
          "countRows": false,
          "fields": "",
          "reducer": [
            "sum"
          ],
          "show": false
        },
        "showHeader": true,
        "sortBy": []
      },
      "pluginVersion": "12.0.2",
      "targets": [
        {
          "datasource": {
            "type": "influxdb",
            "uid": "${DS_DALLAS_SEC}"
          },
          "hide": false,
          "query": "SELECT \n    last(\"io_running\") AS \"IO\",\n    last(\"sql_running\") AS \"SQL\",\n    last(\"seconds_behind_source\") AS \"Lag(s)\",\n    last(\"replication_lag_bytes\") AS \"Lag(bytes)\",\n    last(\"replication_healthy\") AS \"Health\"\nFROM \"mysql_replica_status\" \nWHERE (\"zone\" =~ /^$zone$/ AND \"host\" =~ /^$host$/) AND $timeFilter \nGROUP BY \"host\", \"channel\", \"source_host\"",
          "rawQuery": true,
          "refId": "A",
          "resultFormat": "table"
        },
        {
          "datasource": {
            "type": "influxdb",
            "uid": "${InfluxDS}"
          },
          "hide": true,
          "query": "SELECT last(\"last_io_errno\") AS \"IO Error\", \n       last(\"last_sql_errno\") AS \"SQL Error\",\n       last(\"seconds_behind_source\") AS \"Lag (sec)\",\n       last(\"replication_healthy\") AS \"Health\"\nFROM \"mysql_replica_status\" \nWHERE (\"zone\" =~ /^$zone$/ AND \"host\" =~ /^$host$/) AND $timeFilter \nGROUP BY \"host\", \"channel\", \"source_host\"",
          "rawQuery": true,
          "refId": "B",
          "resultFormat": "time_series"
        }
      ],
      "title": "Replication Status Table",
      "transformations": [
        {
          "id": "organize",
          "options": {
            "excludeByName": {
              "host": true
            },
            "includeByName": {},
            "indexByName": {},
            "renameByName": {}
          }
        }
      ],
      "type": "table"
    },
    {
      "datasource": {
        "type": "influxdb",
        "uid": "${DS_DALLAS_SEC}"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "custom": {
            "align": "left",
            "cellOptions": {
              "type": "auto"
            },
            "inspect": false
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green"
              },
              {
                "color": "red",
                "value": 80
              }
            ]
          }
        },
        "overrides": [
          {
            "matcher": {
              "id": "byName",
              "options": "host"
            },
            "properties": [
              {
                "id": "custom.width",
                "value": 156
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "source_host"
            },
            "properties": [
              {
                "id": "custom.width",
                "value": 118
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "channel"
            },
            "properties": [
              {
                "id": "custom.width",
                "value": 87
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "IO"
            },
            "properties": [
              {
                "id": "custom.width",
                "value": 72
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "SQL"
            },
            "properties": [
              {
                "id": "custom.width",
                "value": 72
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Lag(s)"
            },
            "properties": [
              {
                "id": "custom.width",
                "value": 83
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Lag(bytes)"
            },
            "properties": [
              {
                "id": "custom.width",
                "value": 109
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Health"
            },
            "properties": [
              {
                "id": "custom.width",
                "value": 68
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Time"
            },
            "properties": [
              {
                "id": "custom.width",
                "value": 154
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "IO Error"
            },
            "properties": [
              {
                "id": "custom.width",
                "value": 78
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "SQL Error"
            },
            "properties": [
              {
                "id": "custom.width",
                "value": 87
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Lag (sec)"
            },
            "properties": [
              {
                "id": "custom.width",
                "value": 88
              }
            ]
          }
        ]
      },
      "gridPos": {
        "h": 7,
        "w": 12,
        "x": 12,
        "y": 69
      },
      "id": 103,
      "options": {
        "cellHeight": "sm",
        "footer": {
          "countRows": false,
          "fields": "",
          "reducer": [
            "sum"
          ],
          "show": false
        },
        "showHeader": true,
        "sortBy": []
      },
      "pluginVersion": "12.0.2",
      "targets": [
        {
          "datasource": {
            "type": "influxdb",
            "uid": "${InfluxDS}"
          },
          "query": "SELECT last(\"last_io_errno\") AS \"IO Error\", \n       last(\"last_sql_errno\") AS \"SQL Error\",\n       last(\"seconds_behind_source\") AS \"Lag (sec)\",\n       last(\"replication_healthy\") AS \"Health\"\nFROM \"mysql_replica_status\" \nWHERE (\"zone\" =~ /^$zone$/ AND \"host\" =~ /^$host$/) AND $timeFilter \nGROUP BY \"host\", \"channel\", \"source_host\"",
          "rawQuery": true,
          "refId": "A",
          "resultFormat": "table"
        }
      ],
      "title": "Replication Errors",
      "transformations": [
        {
          "id": "organize",
          "options": {
            "excludeByName": {
              "host": true
            },
            "includeByName": {},
            "indexByName": {},
            "renameByName": {}
          }
        }
      ],
      "type": "table"
    },
    {
      "datasource": {
        "type": "influxdb",
        "uid": "${DS_DALLAS_SEC}"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "palette-classic"
          },
          "custom": {
            "axisPlacement": "auto",
            "fillOpacity": 55,
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "insertNulls": false,
            "lineWidth": 1,
            "spanNulls": false
          },
          "mappings": [
            {
              "options": {
                "0": {
                  "color": "semi-dark-red",
                  "index": 1,
                  "text": "Broken"
                },
                "1": {
                  "color": "semi-dark-green",
                  "index": 0,
                  "text": "OK"
                }
              },
              "type": "value"
            }
          ],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green"
              },
              {
                "color": "red",
                "value": 80
              }
            ]
          }
        },
        "overrides": [
          {
            "matcher": {
              "id": "byName",
              "options": "host"
            },
            "properties": []
          },
          {
            "matcher": {
              "id": "byName",
              "options": "source_host"
            },
            "properties": []
          },
          {
            "matcher": {
              "id": "byName",
              "options": "channel"
            },
            "properties": []
          },
          {
            "matcher": {
              "id": "byName",
              "options": "IO"
            },
            "properties": []
          },
          {
            "matcher": {
              "id": "byName",
              "options": "SQL"
            },
            "properties": []
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Lag(s)"
            },
            "properties": []
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Lag(bytes)"
            },
            "properties": []
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Health"
            },
            "properties": []
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Time"
            },
            "properties": []
          }
        ]
      },
      "gridPos": {
        "h": 5,
        "w": 24,
        "x": 0,
        "y": 76
      },
      "id": 105,
      "options": {
        "alignValue": "center",
        "legend": {
          "displayMode": "list",
          "placement": "bottom",
          "showLegend": false
        },
        "mergeValues": true,
        "rowHeight": 0.9,
        "showValue": "auto",
        "tooltip": {
          "hideZeros": false,
          "mode": "single",
          "sort": "none"
        }
      },
      "pluginVersion": "12.0.2",
      "targets": [
        {
          "alias": "$tag_channel",
          "datasource": {
            "type": "influxdb",
            "uid": "${InfluxDS}"
          },
          "hide": false,
          "query": "SELECT last(\"replication_healthy\") AS \"Health\"\nFROM \"mysql_replica_status\" \nWHERE (\"zone\" =~ /^$zone$/ AND \"host\" =~ /^$host$/) AND $timeFilter \nGROUP BY time($interval), \"channel\"",
          "rawQuery": true,
          "refId": "A",
          "resultFormat": "time_series"
        },
        {
          "datasource": {
            "type": "influxdb",
            "uid": "${DS_DALLAS_SEC}"
          },
          "hide": true,
          "query": "SELECT last(\"last_io_errno\") AS \"IO Error\", \n       last(\"last_sql_errno\") AS \"SQL Error\",\n       last(\"seconds_behind_source\") AS \"Lag (sec)\",\n       last(\"replication_healthy\") AS \"Health\"\nFROM \"mysql_replica_status\" \nWHERE (\"zone\" =~ /^$zone$/ AND \"host\" =~ /^$host$/) AND $timeFilter \nGROUP BY \"host\", \"channel\", \"source_host\"",
          "rawQuery": true,
          "refId": "B",
          "resultFormat": "time_series"
        }
      ],
      "title": "Replication Timeline",
      "transformations": [
        {
          "id": "organize",
          "options": {
            "excludeByName": {
              "host": true
            },
            "includeByName": {},
            "indexByName": {},
            "renameByName": {}
          }
        }
      ],
      "type": "state-timeline"
    },
    {
      "collapsed": false,
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 81
      },
      "id": 44,
      "panels": [],
      "title": "Connection Stats",
      "type": "row"
    },
    {
      "datasource": {
        "type": "influxdb",
        "uid": "${InfluxDS}"
      },
      "description": "## Current Active Connections\n\n**What it shows:** Number of currently open client connections to MySQL server.\n\n**Healthy Range:** \n- Normal: 5-100 connections\n- Warning: 100-200 connections  \n- Critical: >200 connections or >70% of max_connections\n\n**Thresholds:**\n- ðŸŸ¢ Green: 0-100\n- ðŸŸ¡ Yellow: 100-200\n- ðŸ”´ Red: >200\n\n**Troubleshooting:**\n\n**High Connection Count (>200):**\n1. Check for connection leaks in application\n2. Verify connection pool settings\n3. Look for long-running queries: `SHOW PROCESSLIST;`\n4. Check if max_connections needs increase\n5. Investigate aborted connections\n\n**Quick Fixes:**\n```sql\n-- Kill idle connections\nSELECT CONCAT('KILL ', id, ';') \nFROM information_schema.processlist \nWHERE command = 'Sleep' AND time > 300;\n\n-- Check connection sources\nSELECT user, host, COUNT(*) \nFROM information_schema.processlist \nGROUP BY user, host;",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "palette-classic"
          },
          "custom": {
            "axisBorderShow": false,
            "axisCenteredZero": false,
            "axisColorMode": "text",
            "axisLabel": "",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "barWidthFactor": 0.6,
            "drawStyle": "line",
            "fillOpacity": 10,
            "gradientMode": "none",
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "insertNulls": false,
            "lineInterpolation": "linear",
            "lineWidth": 2,
            "pointSize": 5,
            "scaleDistribution": {
              "type": "linear"
            },
            "showPoints": "never",
            "spanNulls": false,
            "stacking": {
              "group": "A",
              "mode": "none"
            },
            "thresholdsStyle": {
              "mode": "off"
            }
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green"
              },
              {
                "color": "red",
                "value": 80
              }
            ]
          },
          "unit": "short"
        },
        "overrides": [
          {
            "__systemRef": "hideSeriesFrom",
            "matcher": {
              "id": "byNames",
              "options": {
                "mode": "exclude",
                "names": [
                  "Active Connections"
                ],
                "prefix": "All except:",
                "readOnly": true
              }
            },
            "properties": [
              {
                "id": "custom.hideFrom",
                "value": {
                  "legend": false,
                  "tooltip": false,
                  "viz": true
                }
              }
            ]
          }
        ]
      },
      "gridPos": {
        "h": 9,
        "w": 8,
        "x": 0,
        "y": 82
      },
      "id": 1,
      "options": {
        "legend": {
          "calcs": [
            "mean",
            "lastNotNull",
            "max"
          ],
          "displayMode": "table",
          "placement": "bottom",
          "showLegend": true
        },
        "tooltip": {
          "hideZeros": false,
          "mode": "multi",
          "sort": "none"
        }
      },
      "pluginVersion": "12.0.2",
      "targets": [
        {
          "alias": "Active Connections",
          "datasource": {
            "type": "influxdb",
            "uid": "${DS_DALLAS_SEC}"
          },
          "dsType": "influxdb",
          "groupBy": [
            {
              "params": [
                "$interval"
              ],
              "type": "time"
            },
            {
              "params": [
                "null"
              ],
              "type": "fill"
            }
          ],
          "measurement": "mysql",
          "policy": "default",
          "query": "SELECT last(\"threads_connected\") \nFROM \"mysql_connections\" \nWHERE (\"zone\" =~ /^$zone$/ AND \"host\" =~ /^$host$/) AND $timeFilter \nGROUP BY time($interval)",
          "rawQuery": true,
          "refId": "A",
          "resultFormat": "time_series",
          "select": [
            [
              {
                "params": [
                  "connections"
                ],
                "type": "field"
              },
              {
                "params": [],
                "type": "mean"
              },
              {
                "params": [
                  "1s"
                ],
                "type": "derivative"
              }
            ]
          ],
          "tags": [
            {
              "key": "host",
              "operator": "=~",
              "value": "/^$host$/"
            }
          ],
          "target": "alias(perSecond(servers.$host.mysql-status.counter-Connections), 'Connections')"
        }
      ],
      "title": "Active Connections",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "influxdb",
        "uid": "${InfluxDS}"
      },
      "description": "## Aborted Connection Rate\n\n**What it shows:** Number of failed connection attempts per minute.\n\n**Healthy Range:**\n- Normal: <5/min\n- Warning: 5-10/min\n- Critical: >10/min\n\n**Thresholds:**\n- ðŸŸ¢ Green: 0-5/min\n- ðŸŸ¡ Yellow: 5-10/min\n- ðŸ”´ Red: >10/min\n\n** Check MySQL error log **\ntail -100 /var/log/mysql/error.log | grep -i \"abort\\|denied\"\n\n# Check network connectivity\nnetstat -an | grep 3306 | grep TIME_WAIT | wc -l\n\n# Test connection from application server\nmysql -h<db_host> -u<user> -p -e \"SELECT 1;\"\n\n**Common Causes:**\n\n1. **Authentication Failures:**\n   - Incorrect passwords\n   - Invalid user/host combinations\n   - Check error log: `grep \"Access denied\" /var/log/mysql/error.log`\n\n2. **Network Issues:**\n   - Timeouts (connect_timeout too low)\n   - Firewall dropping packets\n   - DNS resolution problems\n\n3. **Connection Limits:**\n   - max_connections reached\n   - max_user_connections exceeded\n\n4. **Application Issues:**\n   - Connection pool misconfiguration\n   - Rapid connect/disconnect cycles\n\n**Troubleshooting:**\n```sql\n-- Check recent connection errors\nSELECT * FROM performance_schema.host_cache;\n\n-- Flush host cache if DNS issues\nFLUSH HOSTS;\n\n-- Check user connection limits\nSELECT user, max_user_connections \nFROM mysql.user WHERE user != '';\n\n-- Increase timeouts if needed\nSET GLOBAL connect_timeout = 30;\nSET GLOBAL wait_timeout = 300;",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "palette-classic"
          },
          "custom": {
            "axisBorderShow": false,
            "axisCenteredZero": false,
            "axisColorMode": "text",
            "axisLabel": "",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "barWidthFactor": 0.6,
            "drawStyle": "line",
            "fillOpacity": 10,
            "gradientMode": "none",
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "insertNulls": false,
            "lineInterpolation": "linear",
            "lineWidth": 2,
            "pointSize": 5,
            "scaleDistribution": {
              "type": "linear"
            },
            "showPoints": "never",
            "spanNulls": false,
            "stacking": {
              "group": "A",
              "mode": "normal"
            },
            "thresholdsStyle": {
              "mode": "off"
            }
          },
          "mappings": [],
          "min": 0,
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green"
              },
              {
                "color": "red",
                "value": 80
              }
            ]
          },
          "unit": "none"
        },
        "overrides": [
          {
            "matcher": {
              "id": "byName",
              "options": "Threads connected"
            },
            "properties": [
              {
                "id": "color",
                "value": {
                  "fixedColor": "#EAB839",
                  "mode": "fixed"
                }
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Threads running"
            },
            "properties": [
              {
                "id": "color",
                "value": {
                  "fixedColor": "#E24D42",
                  "mode": "fixed"
                }
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Threads Running"
            },
            "properties": [
              {
                "id": "color",
                "value": {
                  "fixedColor": "#E24D42",
                  "mode": "fixed"
                }
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Threads Connected"
            },
            "properties": [
              {
                "id": "color",
                "value": {
                  "fixedColor": "#EAB839",
                  "mode": "fixed"
                }
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Threads connected"
            },
            "properties": [
              {
                "id": "color",
                "value": {
                  "fixedColor": "#EAB839",
                  "mode": "fixed"
                }
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Threads running"
            },
            "properties": [
              {
                "id": "color",
                "value": {
                  "fixedColor": "#E24D42",
                  "mode": "fixed"
                }
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Threads Running"
            },
            "properties": [
              {
                "id": "color",
                "value": {
                  "fixedColor": "#E24D42",
                  "mode": "fixed"
                }
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Threads Connected"
            },
            "properties": [
              {
                "id": "color",
                "value": {
                  "fixedColor": "#EAB839",
                  "mode": "fixed"
                }
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Threads connected"
            },
            "properties": [
              {
                "id": "color",
                "value": {
                  "fixedColor": "#EAB839",
                  "mode": "fixed"
                }
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Threads running"
            },
            "properties": [
              {
                "id": "color",
                "value": {
                  "fixedColor": "#E24D42",
                  "mode": "fixed"
                }
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Threads Running"
            },
            "properties": [
              {
                "id": "color",
                "value": {
                  "fixedColor": "#E24D42",
                  "mode": "fixed"
                }
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Threads Connected"
            },
            "properties": [
              {
                "id": "color",
                "value": {
                  "fixedColor": "#EAB839",
                  "mode": "fixed"
                }
              }
            ]
          }
        ]
      },
      "gridPos": {
        "h": 9,
        "w": 8,
        "x": 8,
        "y": 82
      },
      "id": 4,
      "options": {
        "legend": {
          "calcs": [
            "mean",
            "lastNotNull",
            "max"
          ],
          "displayMode": "table",
          "placement": "bottom",
          "showLegend": true
        },
        "tooltip": {
          "hideZeros": false,
          "mode": "multi",
          "sort": "none"
        }
      },
      "pluginVersion": "12.0.2",
      "targets": [
        {
          "alias": "Aborted connections",
          "datasource": {
            "type": "influxdb",
            "uid": "${DS_DALLAS_PRI}"
          },
          "dsType": "influxdb",
          "groupBy": [
            {
              "params": [
                "$interval"
              ],
              "type": "time"
            },
            {
              "params": [
                "null"
              ],
              "type": "fill"
            }
          ],
          "measurement": "mysql",
          "policy": "default",
          "query": "SELECT derivative(mean(\"aborted_connects\"), 1m) AS \"aborted_per_min\"\nFROM \"mysql_connections\" \nWHERE (\"zone\" =~ /^$zone$/ AND \"host\" =~ /^$host$/) AND $timeFilter \nGROUP BY time($interval), \"host\" fill(null)",
          "rawQuery": true,
          "refId": "A",
          "resultFormat": "time_series",
          "select": [
            [
              {
                "params": [
                  "threads_connected"
                ],
                "type": "field"
              },
              {
                "params": [],
                "type": "mean"
              }
            ]
          ],
          "tags": [
            {
              "key": "host",
              "operator": "=~",
              "value": "/^$host$/"
            }
          ],
          "target": "alias(servers.$host.mysql-status.gauge-Threads_connected, 'Threads connected')"
        }
      ],
      "title": "Aborted connections",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "influxdb",
        "uid": "${InfluxDS}"
      },
      "description": "## Connection Pool Usage %\n\n**What it shows:** Percentage of max_connections currently in use.\n\n**Formula:** (threads_connected / max_connections) Ã— 100\n\n**Healthy Range:**\n- Optimal: <50%\n- Acceptable: 50-70%\n- Warning: 70-90%\n- Critical: >90%\n\n**Thresholds:**\n- ðŸŸ¢ Green: 0-70%\n- ðŸŸ¡ Yellow: 70-90%\n- ðŸ”´ Red: >90%\n\n**Troubleshooting:**\n\n**High Usage (>70%):**\n1. **Immediate:** Increase max_connections temporarily\n```sql\n   SET GLOBAL max_connections = 500;  -- Adjust as needed",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "palette-classic"
          },
          "custom": {
            "axisBorderShow": false,
            "axisCenteredZero": false,
            "axisColorMode": "text",
            "axisLabel": "",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "barWidthFactor": 0.6,
            "drawStyle": "bars",
            "fillOpacity": 84,
            "gradientMode": "none",
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "insertNulls": false,
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "scaleDistribution": {
              "type": "linear"
            },
            "showPoints": "auto",
            "spanNulls": false,
            "stacking": {
              "group": "A",
              "mode": "none"
            },
            "thresholdsStyle": {
              "mode": "off"
            }
          },
          "decimals": 0,
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green"
              },
              {
                "color": "#EAB839",
                "value": 70
              },
              {
                "color": "#EF843C",
                "value": 80
              },
              {
                "color": "red",
                "value": 90
              }
            ]
          },
          "unit": "percent"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 9,
        "w": 8,
        "x": 16,
        "y": 82
      },
      "id": 92,
      "options": {
        "legend": {
          "calcs": [
            "min",
            "mean",
            "max"
          ],
          "displayMode": "table",
          "placement": "bottom",
          "showLegend": true
        },
        "tooltip": {
          "hideZeros": false,
          "mode": "single",
          "sort": "none"
        }
      },
      "pluginVersion": "12.0.2",
      "targets": [
        {
          "alias": "Connection Pool Usage %",
          "datasource": {
            "type": "influxdb",
            "uid": "${DS_DALLAS_PRI}"
          },
          "query": "SELECT last(\"connection_usage_pct\") \nFROM \"mysql_connections\" \nWHERE (\"zone\" =~ /^$zone$/ AND \"host\" =~ /^$host$/) AND $timeFilter \nGROUP BY time($interval)",
          "rawQuery": true,
          "refId": "A",
          "resultFormat": "time_series"
        }
      ],
      "title": "Connection Pool Usage %",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "influxdb",
        "uid": "${InfluxDS}"
      },
      "description": "",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "palette-classic"
          },
          "custom": {
            "axisBorderShow": false,
            "axisCenteredZero": false,
            "axisColorMode": "text",
            "axisLabel": "",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "barWidthFactor": 0.6,
            "drawStyle": "line",
            "fillOpacity": 10,
            "gradientMode": "none",
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "insertNulls": false,
            "lineInterpolation": "linear",
            "lineWidth": 2,
            "pointSize": 5,
            "scaleDistribution": {
              "type": "linear"
            },
            "showPoints": "never",
            "spanNulls": false,
            "stacking": {
              "group": "A",
              "mode": "none"
            },
            "thresholdsStyle": {
              "mode": "off"
            }
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green"
              },
              {
                "color": "#EAB839",
                "value": 20
              },
              {
                "color": "#EF843C",
                "value": 50
              },
              {
                "color": "red",
                "value": 75
              }
            ]
          },
          "unit": "short"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 9,
        "w": 8,
        "x": 0,
        "y": 91
      },
      "id": 107,
      "options": {
        "legend": {
          "calcs": [
            "mean",
            "lastNotNull",
            "max"
          ],
          "displayMode": "table",
          "placement": "bottom",
          "showLegend": true
        },
        "tooltip": {
          "hideZeros": false,
          "mode": "multi",
          "sort": "none"
        }
      },
      "pluginVersion": "12.0.2",
      "targets": [
        {
          "alias": "Threads Running",
          "datasource": {
            "type": "influxdb",
            "uid": "${DS_DALLAS_SEC}"
          },
          "dsType": "influxdb",
          "groupBy": [
            {
              "params": [
                "$interval"
              ],
              "type": "time"
            },
            {
              "params": [
                "null"
              ],
              "type": "fill"
            }
          ],
          "measurement": "mysql",
          "policy": "default",
          "query": "SELECT mean(\"threads_running\") \nFROM \"mysql_connections\" \nWHERE (\"zone\" =~ /^$zone$/ AND \"host\" =~ /^$host$/) AND $timeFilter \nGROUP BY time($interval), \"host\" fill(null)",
          "rawQuery": true,
          "refId": "A",
          "resultFormat": "time_series",
          "select": [
            [
              {
                "params": [
                  "connections"
                ],
                "type": "field"
              },
              {
                "params": [],
                "type": "mean"
              },
              {
                "params": [
                  "1s"
                ],
                "type": "derivative"
              }
            ]
          ],
          "tags": [
            {
              "key": "host",
              "operator": "=~",
              "value": "/^$host$/"
            }
          ],
          "target": "alias(perSecond(servers.$host.mysql-status.counter-Connections), 'Connections')"
        }
      ],
      "title": "Threads Running",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "influxdb",
        "uid": "${InfluxDS}"
      },
      "description": "",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "custom": {
            "align": "auto",
            "cellOptions": {
              "type": "auto"
            },
            "inspect": false
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green"
              },
              {
                "color": "#EAB839",
                "value": 20
              },
              {
                "color": "#EF843C",
                "value": 50
              },
              {
                "color": "red",
                "value": 75
              }
            ]
          }
        },
        "overrides": [
          {
            "matcher": {
              "id": "byName",
              "options": "host"
            },
            "properties": [
              {
                "id": "custom.width",
                "value": 182
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Time"
            },
            "properties": [
              {
                "id": "custom.width",
                "value": 167
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Connected"
            },
            "properties": [
              {
                "id": "custom.width",
                "value": 97
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "nodeIP"
            },
            "properties": [
              {
                "id": "custom.width",
                "value": 106
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Running"
            },
            "properties": [
              {
                "id": "custom.width",
                "value": 79
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Max"
            },
            "properties": [
              {
                "id": "custom.width",
                "value": 68
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Usage %"
            },
            "properties": [
              {
                "id": "custom.width",
                "value": 98
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Aborted"
            },
            "properties": [
              {
                "id": "custom.width",
                "value": 93
              }
            ]
          }
        ]
      },
      "gridPos": {
        "h": 9,
        "w": 16,
        "x": 8,
        "y": 91
      },
      "id": 108,
      "options": {
        "cellHeight": "sm",
        "footer": {
          "countRows": false,
          "fields": "",
          "reducer": [
            "sum"
          ],
          "show": false
        },
        "showHeader": true,
        "sortBy": []
      },
      "pluginVersion": "12.0.2",
      "targets": [
        {
          "alias": "",
          "datasource": {
            "type": "influxdb",
            "uid": "${DS_DALLAS_SEC}"
          },
          "dsType": "influxdb",
          "groupBy": [
            {
              "params": [
                "$interval"
              ],
              "type": "time"
            },
            {
              "params": [
                "null"
              ],
              "type": "fill"
            }
          ],
          "measurement": "mysql",
          "policy": "default",
          "query": "SELECT \n    last(\"threads_connected\") AS \"Connected\",\n    last(\"threads_running\") AS \"Running\",\n    last(\"max_connections\") AS \"Max\",\n    last(\"connection_usage_pct\") AS \"Usage %\",\n    last(\"aborted_connects\") AS \"Aborted\"\nFROM \"mysql_connections\" \nWHERE (\"zone\" =~ /^$zone$/ AND \"host\" =~ /^$host$/) AND $timeFilter \nGROUP BY time($interval),\"host\", \"nodeIP\"",
          "rawQuery": true,
          "refId": "A",
          "resultFormat": "table",
          "select": [
            [
              {
                "params": [
                  "connections"
                ],
                "type": "field"
              },
              {
                "params": [],
                "type": "mean"
              },
              {
                "params": [
                  "1s"
                ],
                "type": "derivative"
              }
            ]
          ],
          "tags": [
            {
              "key": "host",
              "operator": "=~",
              "value": "/^$host$/"
            }
          ],
          "target": "alias(perSecond(servers.$host.mysql-status.counter-Connections), 'Connections')"
        }
      ],
      "type": "table"
    },
    {
      "collapsed": false,
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 100
      },
      "id": 139,
      "panels": [],
      "title": "LOCK Metrics",
      "type": "row"
    },
    {
      "datasource": {
        "type": "influxdb",
        "uid": "${InfluxDS}"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "palette-classic"
          },
          "custom": {
            "axisBorderShow": false,
            "axisCenteredZero": false,
            "axisColorMode": "text",
            "axisLabel": "",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "barWidthFactor": 0.6,
            "drawStyle": "line",
            "fillOpacity": 0,
            "gradientMode": "none",
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "insertNulls": false,
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "scaleDistribution": {
              "type": "linear"
            },
            "showPoints": "auto",
            "spanNulls": false,
            "stacking": {
              "group": "A",
              "mode": "none"
            },
            "thresholdsStyle": {
              "mode": "off"
            }
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green"
              },
              {
                "color": "red",
                "value": 100
              }
            ]
          },
          "unit": "none"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 9,
        "w": 8,
        "x": 0,
        "y": 101
      },
      "id": 137,
      "options": {
        "legend": {
          "calcs": [
            "min",
            "mean",
            "max"
          ],
          "displayMode": "table",
          "placement": "bottom",
          "showLegend": true
        },
        "tooltip": {
          "hideZeros": false,
          "mode": "single",
          "sort": "none"
        }
      },
      "pluginVersion": "12.0.2",
      "targets": [
        {
          "datasource": {
            "type": "influxdb",
            "uid": "${DS_DALLAS_SEC}"
          },
          "query": "SELECT derivative(mean(\"innodb_row_lock_waits\"), 1m) AS \"lock_waits_per_min\"\nFROM \"mysql_locks\" \nWHERE (\"zone\" =~ /^$zone$/ AND \"host\" =~ /^$host$/) AND $timeFilter \nGROUP BY time($interval), \"host\" fill(null)",
          "rawQuery": true,
          "refId": "A",
          "resultFormat": "table"
        }
      ],
      "title": "Row Lock Waits",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "influxdb",
        "uid": "${InfluxDS}"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "custom": {
            "axisBorderShow": false,
            "axisCenteredZero": false,
            "axisColorMode": "text",
            "axisLabel": "",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "barWidthFactor": 0.6,
            "drawStyle": "line",
            "fillOpacity": 0,
            "gradientMode": "none",
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "insertNulls": false,
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "scaleDistribution": {
              "type": "linear"
            },
            "showPoints": "auto",
            "spanNulls": false,
            "stacking": {
              "group": "A",
              "mode": "none"
            },
            "thresholdsStyle": {
              "mode": "off"
            }
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green"
              },
              {
                "color": "#EAB839",
                "value": 1
              },
              {
                "color": "#EF843C",
                "value": 3
              },
              {
                "color": "red",
                "value": 5
              }
            ]
          },
          "unit": "none"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 9,
        "w": 8,
        "x": 8,
        "y": 101
      },
      "id": 141,
      "options": {
        "legend": {
          "calcs": [
            "min",
            "mean",
            "max"
          ],
          "displayMode": "table",
          "placement": "bottom",
          "showLegend": true
        },
        "tooltip": {
          "hideZeros": false,
          "mode": "single",
          "sort": "none"
        }
      },
      "pluginVersion": "12.0.2",
      "targets": [
        {
          "datasource": {
            "type": "influxdb",
            "uid": "${DS_DALLAS_SEC}"
          },
          "query": "SELECT derivative(mean(\"innodb_deadlocks\"), 1m) AS \"deadlocks_per_min\"\nFROM \"mysql_locks\" \nWHERE (\"zone\" =~ /^$zone$/ AND \"host\" =~ /^$host$/) AND $timeFilter \nGROUP BY time($interval), \"host\" fill(null)",
          "rawQuery": true,
          "refId": "A",
          "resultFormat": "table"
        }
      ],
      "title": "Deadlocks",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "influxdb",
        "uid": "${InfluxDS}"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "#249f14"
              },
              {
                "color": "#EAB839",
                "value": 3
              },
              {
                "color": "#EF843C",
                "value": 5
              },
              {
                "color": "red",
                "value": 10
              }
            ]
          },
          "unit": "none"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 3,
        "w": 6,
        "x": 16,
        "y": 101
      },
      "id": 142,
      "options": {
        "colorMode": "background",
        "graphMode": "area",
        "justifyMode": "auto",
        "orientation": "auto",
        "percentChangeColorMode": "standard",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "",
          "values": false
        },
        "showPercentChange": false,
        "textMode": "auto",
        "wideLayout": true
      },
      "pluginVersion": "12.0.2",
      "targets": [
        {
          "alias": "Current Lock Waits",
          "datasource": {
            "type": "influxdb",
            "uid": "${DS_DALLAS_SEC}"
          },
          "query": "SELECT last(\"innodb_row_lock_current_waits\") AS \"Current Lock Waits\"\nFROM \"mysql_locks\" \nWHERE (\"zone\" =~ /^$zone$/ AND \"host\" =~ /^$host$/) AND $timeFilter \nGROUP BY \"host\"",
          "rawQuery": true,
          "refId": "A",
          "resultFormat": "table"
        }
      ],
      "type": "stat"
    },
    {
      "datasource": {
        "type": "influxdb",
        "uid": "${InfluxDS}"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "#249f14"
              },
              {
                "color": "#EAB839",
                "value": 3
              },
              {
                "color": "#EF843C",
                "value": 5
              },
              {
                "color": "red",
                "value": 10
              }
            ]
          },
          "unit": "ms"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 3,
        "w": 6,
        "x": 16,
        "y": 104
      },
      "id": 144,
      "options": {
        "colorMode": "background",
        "graphMode": "area",
        "justifyMode": "auto",
        "orientation": "auto",
        "percentChangeColorMode": "standard",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "",
          "values": false
        },
        "showPercentChange": false,
        "textMode": "auto",
        "wideLayout": true
      },
      "pluginVersion": "12.0.2",
      "targets": [
        {
          "alias": "",
          "datasource": {
            "type": "influxdb",
            "uid": "${DS_DALLAS_SEC}"
          },
          "query": "SELECT last(\"innodb_row_lock_time_avg\") AS \"Average Lock Wait Time\"\nFROM \"mysql_locks\" \nWHERE (\"zone\" =~ /^$zone$/ AND \"host\" =~ /^$host$/) AND $timeFilter \nGROUP BY \"host\"",
          "rawQuery": true,
          "refId": "A",
          "resultFormat": "table"
        }
      ],
      "type": "stat"
    },
    {
      "collapsed": false,
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 110
      },
      "id": 136,
      "panels": [],
      "title": "InnoDB Row Operations ",
      "type": "row"
    },
    {
      "datasource": {
        "type": "influxdb",
        "uid": "${InfluxDS}"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "palette-classic"
          },
          "custom": {
            "axisBorderShow": false,
            "axisCenteredZero": false,
            "axisColorMode": "text",
            "axisLabel": "",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "barWidthFactor": 0.6,
            "drawStyle": "line",
            "fillOpacity": 9,
            "gradientMode": "none",
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "insertNulls": false,
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "scaleDistribution": {
              "type": "linear"
            },
            "showPoints": "auto",
            "spanNulls": false,
            "stacking": {
              "group": "A",
              "mode": "none"
            },
            "thresholdsStyle": {
              "mode": "off"
            }
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green"
              },
              {
                "color": "red",
                "value": 80
              }
            ]
          },
          "unit": "none"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 10,
        "w": 8,
        "x": 0,
        "y": 111
      },
      "id": 125,
      "options": {
        "legend": {
          "calcs": [
            "min",
            "mean",
            "max"
          ],
          "displayMode": "table",
          "placement": "bottom",
          "showLegend": true
        },
        "tooltip": {
          "hideZeros": false,
          "mode": "single",
          "sort": "none"
        }
      },
      "pluginVersion": "12.0.2",
      "targets": [
        {
          "datasource": {
            "type": "influxdb",
            "uid": "${DS_DALLAS_SEC}"
          },
          "query": "SELECT \n    derivative(mean(\"innodb_rows_read\"), 1s) AS \"Read/s\",\n    derivative(mean(\"innodb_rows_inserted\"), 1s) AS \"Inserted/s\",\n    derivative(mean(\"innodb_rows_updated\"), 1s) AS \"Updated/s\",\n    derivative(mean(\"innodb_rows_deleted\"), 1s) AS \"Deleted/s\"\nFROM \"mysql_innodb_rows\" \nWHERE (\"zone\" =~ /^$zone$/ AND \"host\" =~ /^$host$/) AND $timeFilter \nGROUP BY time($interval), \"host\" fill(null)",
          "rawQuery": true,
          "refId": "A",
          "resultFormat": "table"
        }
      ],
      "title": "Row Operations Per Second",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "influxdb",
        "uid": "${InfluxDS}"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "fixedColor": "super-light-blue",
            "mode": "shades"
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green"
              },
              {
                "color": "red",
                "value": 80
              }
            ]
          },
          "unit": "short"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 5,
        "w": 16,
        "x": 8,
        "y": 111
      },
      "id": 138,
      "options": {
        "colorMode": "background",
        "graphMode": "area",
        "justifyMode": "auto",
        "orientation": "auto",
        "percentChangeColorMode": "standard",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "",
          "values": false
        },
        "showPercentChange": false,
        "textMode": "auto",
        "wideLayout": true
      },
      "pluginVersion": "12.0.2",
      "targets": [
        {
          "alias": "",
          "datasource": {
            "type": "influxdb",
            "uid": "${DS_DALLAS_SEC}"
          },
          "query": "SELECT \n    last(\"innodb_rows_read\") AS \"Read\",\n    last(\"innodb_rows_inserted\") AS \"Inserted\",\n    last(\"innodb_rows_updated\") AS \"Updated\",\n    last(\"innodb_rows_deleted\") AS \"Deleted\"\nFROM \"mysql_innodb_rows\" \nWHERE (\"zone\" =~ /^$zone$/ AND \"host\" =~ /^$host$/) AND $timeFilter \nGROUP BY time($interval),\"host\"",
          "rawQuery": true,
          "refId": "A",
          "resultFormat": "table"
        }
      ],
      "title": "Total Row Operations",
      "type": "stat"
    },
    {
      "collapsed": false,
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 121
      },
      "id": 50,
      "panels": [],
      "title": "InnoDB Stats",
      "type": "row"
    },
    {
      "datasource": {
        "type": "influxdb",
        "uid": "${InfluxDS}"
      },
      "description": "",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "palette-classic"
          },
          "custom": {
            "axisBorderShow": false,
            "axisCenteredZero": false,
            "axisColorMode": "text",
            "axisLabel": "",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "barWidthFactor": 0.6,
            "drawStyle": "line",
            "fillOpacity": 13,
            "gradientMode": "none",
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "insertNulls": false,
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "scaleDistribution": {
              "type": "linear"
            },
            "showPoints": "auto",
            "spanNulls": false,
            "stacking": {
              "group": "A",
              "mode": "none"
            },
            "thresholdsStyle": {
              "mode": "off"
            }
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green"
              },
              {
                "color": "red",
                "value": 80
              }
            ]
          },
          "unit": "ops"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 8,
        "w": 8,
        "x": 0,
        "y": 122
      },
      "id": 51,
      "options": {
        "legend": {
          "calcs": [
            "min",
            "max",
            "mean",
            "lastNotNull"
          ],
          "displayMode": "table",
          "placement": "bottom",
          "showLegend": true
        },
        "tooltip": {
          "hideZeros": false,
          "mode": "single",
          "sort": "none"
        }
      },
      "pluginVersion": "12.0.2",
      "targets": [
        {
          "alias": "",
          "datasource": {
            "type": "influxdb",
            "uid": "${DS_DALLAS_PRI}"
          },
          "query": "SELECT \n    derivative(mean(\"innodb_data_reads\"), 1s) AS \"Reads/s\",\n    derivative(mean(\"innodb_data_writes\"), 1s) AS \"Writes/s\"\nFROM \"mysql_innodb_io\" \nWHERE (\"zone\" =~ /^$zone$/ AND \"host\" =~ /^$host$/) AND $timeFilter \nGROUP BY time($interval), \"host\" fill(null)",
          "rawQuery": true,
          "refId": "A",
          "resultFormat": "table"
        }
      ],
      "title": "InnoDB Data Operations",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "influxdb",
        "uid": "${InfluxDS}"
      },
      "description": "",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "custom": {
            "axisBorderShow": false,
            "axisCenteredZero": false,
            "axisColorMode": "text",
            "axisLabel": "",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "barWidthFactor": 0.6,
            "drawStyle": "line",
            "fillOpacity": 13,
            "gradientMode": "none",
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "insertNulls": false,
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "scaleDistribution": {
              "type": "linear"
            },
            "showPoints": "auto",
            "spanNulls": false,
            "stacking": {
              "group": "A",
              "mode": "none"
            },
            "thresholdsStyle": {
              "mode": "off"
            }
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green"
              },
              {
                "color": "#EAB839",
                "value": 160000
              },
              {
                "color": "#EF843C",
                "value": 1800000
              },
              {
                "color": "red",
                "value": 15000000
              }
            ]
          },
          "unit": "bytes"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 8,
        "w": 8,
        "x": 8,
        "y": 122
      },
      "id": 52,
      "options": {
        "legend": {
          "calcs": [
            "min",
            "max",
            "mean",
            "lastNotNull"
          ],
          "displayMode": "table",
          "placement": "bottom",
          "showLegend": true
        },
        "tooltip": {
          "hideZeros": false,
          "mode": "single",
          "sort": "none"
        }
      },
      "pluginVersion": "12.0.2",
      "targets": [
        {
          "alias": "",
          "datasource": {
            "type": "influxdb",
            "uid": "${DS_DALLAS_SEC}"
          },
          "query": "SELECT \n    derivative(mean(\"innodb_data_read\"), 1s) AS \"Read Bytes/s\",\n    derivative(mean(\"innodb_data_written\"), 1s) AS \"Written Bytes/s\"\nFROM \"mysql_innodb_io\" \nWHERE (\"zone\" =~ /^$zone$/ AND \"host\" =~ /^$host$/) AND $timeFilter \nGROUP BY time($interval), \"host\" fill(null)",
          "rawQuery": true,
          "refId": "A",
          "resultFormat": "table"
        }
      ],
      "title": "InniDB Data Volume",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "influxdb",
        "uid": "${InfluxDS}"
      },
      "description": "",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "custom": {
            "axisBorderShow": false,
            "axisCenteredZero": false,
            "axisColorMode": "text",
            "axisLabel": "",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "barWidthFactor": 0.6,
            "drawStyle": "line",
            "fillOpacity": 13,
            "gradientMode": "none",
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "insertNulls": false,
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "scaleDistribution": {
              "type": "linear"
            },
            "showPoints": "auto",
            "spanNulls": false,
            "stacking": {
              "group": "A",
              "mode": "none"
            },
            "thresholdsStyle": {
              "mode": "off"
            }
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green"
              },
              {
                "color": "#EAB839",
                "value": 1600000
              },
              {
                "color": "#EF843C",
                "value": 18000000
              },
              {
                "color": "red",
                "value": 150000000
              }
            ]
          },
          "unit": "bytes"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 8,
        "w": 8,
        "x": 16,
        "y": 122
      },
      "id": 122,
      "options": {
        "legend": {
          "calcs": [
            "min",
            "max",
            "mean",
            "lastNotNull"
          ],
          "displayMode": "table",
          "placement": "bottom",
          "showLegend": true
        },
        "tooltip": {
          "hideZeros": false,
          "mode": "single",
          "sort": "none"
        }
      },
      "pluginVersion": "12.0.2",
      "targets": [
        {
          "alias": "",
          "datasource": {
            "type": "influxdb",
            "uid": "${DS_DALLAS_SEC}"
          },
          "query": "SELECT derivative(mean(\"innodb_os_log_written\"), 1s) AS \"log_bytes_per_sec\"\nFROM \"mysql_innodb_io\" \nWHERE (\"zone\" =~ /^$zone$/ AND \"host\" =~ /^$host$/) AND $timeFilter \nGROUP BY time($interval), \"host\" fill(null)",
          "rawQuery": true,
          "refId": "A",
          "resultFormat": "table"
        }
      ],
      "title": "Log Writes",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "influxdb",
        "uid": "${InfluxDS}"
      },
      "description": "",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "palette-classic"
          },
          "custom": {
            "axisBorderShow": false,
            "axisCenteredZero": false,
            "axisColorMode": "text",
            "axisLabel": "",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "barWidthFactor": 0.6,
            "drawStyle": "line",
            "fillOpacity": 13,
            "gradientMode": "none",
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "insertNulls": false,
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "scaleDistribution": {
              "type": "linear"
            },
            "showPoints": "auto",
            "spanNulls": false,
            "stacking": {
              "group": "A",
              "mode": "none"
            },
            "thresholdsStyle": {
              "mode": "off"
            }
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green"
              },
              {
                "color": "red",
                "value": 80
              }
            ]
          },
          "unit": "fsyncs/sec"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 8,
        "w": 10,
        "x": 0,
        "y": 130
      },
      "id": 121,
      "options": {
        "legend": {
          "calcs": [
            "min",
            "max",
            "mean",
            "lastNotNull"
          ],
          "displayMode": "table",
          "placement": "bottom",
          "showLegend": true
        },
        "tooltip": {
          "hideZeros": false,
          "mode": "single",
          "sort": "none"
        }
      },
      "pluginVersion": "12.0.2",
      "targets": [
        {
          "alias": "",
          "datasource": {
            "type": "influxdb",
            "uid": "${DS_DALLAS_PRI}"
          },
          "query": "SELECT derivative(mean(\"innodb_data_fsyncs\"), 1s) AS \"fsyncs_per_sec\"\nFROM \"mysql_innodb_io\" \nWHERE (\"zone\" =~ /^$zone$/ AND \"host\" =~ /^$host$/) AND $timeFilter \nGROUP BY time($interval), \"host\" fill(null)",
          "rawQuery": true,
          "refId": "A",
          "resultFormat": "table"
        }
      ],
      "title": "FSync Operations",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "influxdb",
        "uid": "${InfluxDS}"
      },
      "description": "",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "custom": {
            "axisBorderShow": false,
            "axisCenteredZero": false,
            "axisColorMode": "text",
            "axisLabel": "",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "barWidthFactor": 0.6,
            "drawStyle": "line",
            "fillOpacity": 13,
            "gradientMode": "none",
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "insertNulls": false,
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "scaleDistribution": {
              "type": "linear"
            },
            "showPoints": "auto",
            "spanNulls": false,
            "stacking": {
              "group": "A",
              "mode": "none"
            },
            "thresholdsStyle": {
              "mode": "off"
            }
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green"
              },
              {
                "color": "red",
                "value": 150
              }
            ]
          },
          "unit": "rps"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 8,
        "w": 9,
        "x": 10,
        "y": 130
      },
      "id": 120,
      "options": {
        "legend": {
          "calcs": [
            "min",
            "max",
            "mean",
            "lastNotNull"
          ],
          "displayMode": "table",
          "placement": "bottom",
          "showLegend": true
        },
        "tooltip": {
          "hideZeros": false,
          "mode": "single",
          "sort": "none"
        }
      },
      "pluginVersion": "12.0.2",
      "targets": [
        {
          "alias": "",
          "datasource": {
            "type": "influxdb",
            "uid": "${DS_DALLAS_SEC}"
          },
          "query": "SELECT derivative(mean(\"buffer_pool_reads\"), 1s) AS \"disk_reads_per_sec\"\nFROM \"mysql_innodb_buffer_pool\" \nWHERE (\"zone\" =~ /^$zone$/ AND \"host\" =~ /^$host$/) AND $timeFilter \nGROUP BY time($interval), \"host\" fill(null)",
          "rawQuery": true,
          "refId": "A",
          "resultFormat": "table"
        }
      ],
      "title": "Buffer Pool Reads (Physical Disk Reads)",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "influxdb",
        "uid": "${InfluxDS}"
      },
      "description": "## InnoDB Buffer Pool Hit Ratio % âš¡ CRITICAL METRIC\n\n**What it shows:** Percentage of data requests served from memory (buffer pool) vs. disk.\n\n**Formula:** ((read_requests - disk_reads) / read_requests) Ã— 100\n\n**Target Thresholds:**\n- ðŸ”´ Critical: <95% (Too many disk reads!)\n- ðŸŸ¡ Warning: 95-99% (Needs attention)\n- ðŸŸ¢ Excellent: >99% (Optimal)\n- ðŸŒŸ Perfect: >99.9%\n\n**Why This is THE Most Important Metric:**\n- Memory is 1000x faster than disk\n- Low hit ratio = severe performance degradation\n- Direct impact on query response time\n- Affects all operations (reads, writes, joins)\n\n**Healthy Range:** >99% at all times\n\n**Troubleshooting:**\n\n**Low Buffer Pool Hit Ratio (<99%):**\n\n**IMMEDIATE ACTION (Critical <95%):**\n1. **Check current buffer pool size:**\n```sql\n   SHOW VARIABLES LIKE 'innodb_buffer_pool_size';\n   SELECT @@innodb_buffer_pool_size/1024/1024/1024 AS buffer_pool_gb;",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "decimals": 0,
          "mappings": [
            {
              "options": {
                "0": {
                  "color": "semi-dark-red",
                  "index": 1,
                  "text": "No"
                },
                "1": {
                  "color": "semi-dark-green",
                  "index": 0,
                  "text": "Yes"
                }
              },
              "type": "value"
            }
          ],
          "max": 120,
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "#a91d21"
              },
              {
                "color": "#EAB839",
                "value": 95
              },
              {
                "color": "#c04a07",
                "value": 97
              },
              {
                "color": "#10a825",
                "value": 99
              }
            ]
          },
          "unit": "none"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 4,
        "w": 5,
        "x": 19,
        "y": 130
      },
      "id": 117,
      "options": {
        "minVizHeight": 75,
        "minVizWidth": 75,
        "orientation": "auto",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "",
          "values": false
        },
        "showThresholdLabels": false,
        "showThresholdMarkers": true,
        "sizing": "auto"
      },
      "pluginVersion": "12.0.2",
      "targets": [
        {
          "alias": "buffer_pool_hit_ratio",
          "datasource": {
            "type": "influxdb",
            "uid": "${DS_DALLAS_PRI}"
          },
          "query": "SELECT last(\"buffer_pool_hit_ratio\") AS \"buffer_pool_hit_ratio\"\nFROM \"mysql_innodb_buffer_pool\" \nWHERE (\"zone\" =~ /^$zone$/ AND \"host\" =~ /^$host$/) AND $timeFilter \nGROUP BY \"host\"",
          "rawQuery": true,
          "refId": "A",
          "resultFormat": "table"
        }
      ],
      "title": "buffer_pool_hit_ratio",
      "type": "gauge"
    },
    {
      "datasource": {
        "type": "influxdb",
        "uid": "${InfluxDS}"
      },
      "description": "## Buffer Pool Wait Free ðŸš¨ EMERGENCY METRIC\n\n**What it shows:** Number of times InnoDB had to wait for a free page in buffer pool.\n\n**Healthy Value:** 0 (ALWAYS!)\n\n**Threshold:**\n- ðŸŸ¢ Normal: 0\n- ðŸ”´ **CRITICAL: >0** (Emergency situation!)\n\n**Why This is an EMERGENCY:**\n- Means buffer pool is COMPLETELY FULL\n- No free pages available for new data\n- InnoDB must evict pages (expensive operation)\n- All queries waiting for free pages\n- Database essentially stalled\n- Users experiencing timeouts\n\n**IMMEDIATE ACTION REQUIRED:**\n\n**Step 1: EMERGENCY Response (Within 1 minute)**\n```sql\n-- 1. Check current situation\nSHOW ENGINE INNODB STATUS\\G\n\n-- 2. Identify blocking queries\nSELECT * FROM information_schema.processlist \nWHERE command != 'Sleep' \nORDER BY time DESC LIMIT 20;\n\n-- 3. Kill long-running queries if necessary\nKILL <process_id>;",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "decimals": 0,
          "mappings": [],
          "max": 120,
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "dark-green"
              },
              {
                "color": "#EAB839",
                "value": 1
              },
              {
                "color": "#c04a07",
                "value": 3
              },
              {
                "color": "semi-dark-red",
                "value": 5
              }
            ]
          },
          "unit": "none"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 4,
        "w": 5,
        "x": 19,
        "y": 134
      },
      "id": 118,
      "options": {
        "colorMode": "background",
        "graphMode": "area",
        "justifyMode": "auto",
        "orientation": "auto",
        "percentChangeColorMode": "standard",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "",
          "values": false
        },
        "showPercentChange": false,
        "textMode": "auto",
        "wideLayout": true
      },
      "pluginVersion": "12.0.2",
      "targets": [
        {
          "alias": "Buffer Pool Wait Free",
          "datasource": {
            "type": "influxdb",
            "uid": "${DS_DALLAS_PRI}"
          },
          "query": "SELECT last(\"buffer_pool_wait_free\") AS \"Buffer Pool Wait Free\"\nFROM \"mysql_innodb_buffer_pool\" \nWHERE (\"zone\" =~ /^$zone$/ AND \"host\" =~ /^$host$/) AND $timeFilter \nGROUP BY time($interval)",
          "rawQuery": true,
          "refId": "A",
          "resultFormat": "table"
        }
      ],
      "type": "stat"
    },
    {
      "datasource": {
        "type": "influxdb",
        "uid": "${InfluxDS}"
      },
      "description": "",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "palette-classic"
          },
          "custom": {
            "axisBorderShow": false,
            "axisCenteredZero": false,
            "axisColorMode": "text",
            "axisLabel": "",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "barWidthFactor": 0.6,
            "drawStyle": "line",
            "fillOpacity": 13,
            "gradientMode": "none",
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "insertNulls": false,
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "scaleDistribution": {
              "type": "linear"
            },
            "showPoints": "auto",
            "spanNulls": false,
            "stacking": {
              "group": "A",
              "mode": "none"
            },
            "thresholdsStyle": {
              "mode": "off"
            }
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green"
              },
              {
                "color": "red",
                "value": 80
              }
            ]
          },
          "unit": "pages"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 9,
        "w": 9,
        "x": 0,
        "y": 138
      },
      "id": 119,
      "options": {
        "legend": {
          "calcs": [
            "min",
            "max",
            "mean",
            "lastNotNull"
          ],
          "displayMode": "table",
          "placement": "bottom",
          "showLegend": true
        },
        "tooltip": {
          "hideZeros": false,
          "mode": "single",
          "sort": "none"
        }
      },
      "pluginVersion": "12.0.2",
      "targets": [
        {
          "alias": "",
          "datasource": {
            "type": "influxdb",
            "uid": "${DS_DALLAS_PRI}"
          },
          "query": "SELECT \n    mean(\"buffer_pool_pages_data\") AS \"Data Pages\",\n    mean(\"buffer_pool_pages_dirty\") AS \"Dirty Pages\",\n    mean(\"buffer_pool_pages_free\") AS \"Free Pages\"\nFROM \"mysql_innodb_buffer_pool\" \nWHERE (\"zone\" =~ /^$zone$/ AND \"host\" =~ /^$host$/) AND $timeFilter \nGROUP BY time($interval), \"host\" fill(null)",
          "rawQuery": true,
          "refId": "A",
          "resultFormat": "table"
        }
      ],
      "title": "Buffer Pool Pages Status",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "influxdb",
        "uid": "${InfluxDS}"
      },
      "description": "ðŸ” What It Measures:\n\ncreated_tmp_disk_tables is a MySQL status variable that tracks the number of temporary tables that were created on disk, rather than in memory.\n\nðŸ’¡ Why This Metric Matters:\n\n    Temporary tables are used internally by MySQL when executing certain queries (e.g., with GROUP BY, ORDER BY, or UNION).\n\n    Ideally, these temporary tables are created in memory for speed.\n\n    If MySQL creates too many on disk, it usually means:\n\n        Memory limits are too low (tmp_table_size, max_heap_table_size)\n\n        Queries are poorly optimized\n\n        Large BLOB or TEXT fields are involved\n\nðŸ§  Summary:\n\nComponent\tMeaning\ncreated_tmp_disk_tables\tNumber of on-disk temp tables created since MySQL started\nHigh value\tPossible query inefficiencies or low memory limits\nUsing just mean()\tShows average total count in interval (not rate)\nRecommended for rate\tUse non_negative_derivative(mean(...), 1s)",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "custom": {
            "align": "auto",
            "cellOptions": {
              "type": "auto"
            },
            "inspect": false
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green"
              },
              {
                "color": "red",
                "value": 80
              }
            ]
          },
          "unit": "none"
        },
        "overrides": [
          {
            "matcher": {
              "id": "byName",
              "options": "host"
            },
            "properties": [
              {
                "id": "custom.width",
                "value": 185
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Size (bytes)"
            },
            "properties": [
              {
                "id": "custom.width",
                "value": 114
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Total Pages"
            },
            "properties": [
              {
                "id": "custom.width",
                "value": 101
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Data Pages"
            },
            "properties": [
              {
                "id": "custom.width",
                "value": 97
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Dirty Pages"
            },
            "properties": [
              {
                "id": "custom.width",
                "value": 99
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Hit Ratio %"
            },
            "properties": [
              {
                "id": "custom.width",
                "value": 106
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Time"
            },
            "properties": [
              {
                "id": "custom.width",
                "value": 162
              }
            ]
          }
        ]
      },
      "gridPos": {
        "h": 9,
        "w": 15,
        "x": 9,
        "y": 138
      },
      "id": 53,
      "options": {
        "cellHeight": "sm",
        "footer": {
          "countRows": false,
          "fields": "",
          "reducer": [
            "sum"
          ],
          "show": false
        },
        "showHeader": true,
        "sortBy": []
      },
      "pluginVersion": "12.0.2",
      "targets": [
        {
          "alias": "created temp disk_tables ratio",
          "datasource": {
            "type": "influxdb",
            "uid": "${DS_DALLAS_PRI}"
          },
          "query": "SELECT \n    last(\"buffer_pool_size\") AS \"Size (bytes)\",\n    last(\"buffer_pool_pages_total\") AS \"Total Pages\",\n    last(\"buffer_pool_pages_data\") AS \"Data Pages\",\n    last(\"buffer_pool_pages_dirty\") AS \"Dirty Pages\",\n    last(\"buffer_pool_hit_ratio\") AS \"Hit Ratio %\"\nFROM \"mysql_innodb_buffer_pool\" \nWHERE (\"zone\" =~ /^$zone$/ AND \"host\" =~ /^$host$/) AND $timeFilter \nGROUP BY time($interval),\"host\"",
          "rawQuery": true,
          "refId": "A",
          "resultFormat": "table"
        }
      ],
      "title": "Buffer Pool Details Table",
      "type": "table"
    },
    {
      "collapsed": false,
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 147
      },
      "id": 73,
      "panels": [],
      "title": "Query Performance",
      "type": "row"
    },
    {
      "datasource": {
        "type": "influxdb",
        "uid": "${InfluxDS}"
      },
      "description": "## Queries Per Second (QPS)\n\n**What it shows:** Total number of queries executed per second across all types.\n\n**Healthy Range:**\n- Small DB: 100-1,000 QPS\n- Medium DB: 1,000-10,000 QPS\n- Large DB: >10,000 QPS\n\n**What to Watch:**\n- **Sudden Spikes:** May indicate traffic surge or runaway query\n- **Sudden Drops:** Could mean application issues or connection problems\n- **Gradual Increase:** Normal growth pattern (good!)\n- **High Variability:** Indicates inconsistent load\n\n**Baseline:** Establish your normal QPS during peak/off-peak hours\n\n**Troubleshooting:**\n\n**Unexpected Spike in QPS:**\n1. Check for application deployments or changes\n2. Identify top queries:\n```sql\n   SELECT digest_text, count_star, avg_timer_wait/1000000000000 AS avg_sec\n   FROM performance_schema.events_statements_summary_by_digest\n   ORDER BY count_star DESC LIMIT 10;\n\n\nLook for cartesian joins or missing WHERE clauses\nCheck if batch jobs are running\nVerify caching is working (app-level, query cache)\n\nSudden Drop in QPS:\n\nCheck application health and connectivity\nVerify no connection pool exhaustion\nCheck for blocking queries: SHOW PROCESSLIST;\nReview error logs for connection issues\n\nPerformance Impact:\n\nHigh QPS + High CPU = Query optimization needed\nHigh QPS + Low CPU = Good optimization\nLow QPS + High CPU = Inefficient queries or locks",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds",
            "seriesBy": "last"
          },
          "custom": {
            "axisBorderShow": false,
            "axisCenteredZero": false,
            "axisColorMode": "text",
            "axisLabel": "",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "barWidthFactor": 0.6,
            "drawStyle": "line",
            "fillOpacity": 64,
            "gradientMode": "opacity",
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "insertNulls": false,
            "lineInterpolation": "smooth",
            "lineWidth": 1,
            "pointSize": 5,
            "scaleDistribution": {
              "type": "linear"
            },
            "showPoints": "auto",
            "spanNulls": false,
            "stacking": {
              "group": "A",
              "mode": "normal"
            },
            "thresholdsStyle": {
              "mode": "off"
            }
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green"
              },
              {
                "color": "#EAB839",
                "value": 3000
              },
              {
                "color": "#EF843C",
                "value": 5000
              },
              {
                "color": "red",
                "value": 7500
              }
            ]
          },
          "unit": "queries/sec"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 0,
        "y": 148
      },
      "id": 148,
      "options": {
        "legend": {
          "calcs": [
            "min",
            "max",
            "sum",
            "lastNotNull"
          ],
          "displayMode": "table",
          "placement": "bottom",
          "showLegend": true
        },
        "tooltip": {
          "hideZeros": false,
          "mode": "single",
          "sort": "none"
        }
      },
      "pluginVersion": "12.0.2",
      "targets": [
        {
          "alias": "Counts",
          "datasource": {
            "type": "influxdb",
            "uid": "${DS_DALLAS_SEC}"
          },
          "query": "SELECT derivative(mean(\"queries\"), 1s) AS \"qps\"\nFROM \"mysql_queries\" \nWHERE (\"zone\" =~ /^$zone$/ AND \"host\" =~ /^$host$/) AND $timeFilter \nGROUP BY time($interval), \"host\" fill(null)",
          "rawQuery": true,
          "refId": "A",
          "resultFormat": "time_series"
        }
      ],
      "title": "QPS",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "influxdb",
        "uid": "${DS_DALLAS_PRI}"
      },
      "description": "## Full Table Scans Per Minute\n\n**What it shows:** Number of queries performing full table scans (reading entire table without using index).\n\n**Healthy Range:**\n- Optimal: <10/min\n- Acceptable: 10-100/min\n- Warning: 100-1000/min\n- Critical: >1000/min\n\n**Why It Matters:** Full table scans are expensive operations that:\n- Read all rows in a table\n- Cause high disk I/O\n- Increase query execution time\n- Impact buffer pool efficiency\n\n**When Full Scans Are OK:**\n- Small tables (<1000 rows)\n- Administrative queries (SHOW, INFORMATION_SCHEMA)\n- Intentional data exports\n- Analytics queries on small datasets\n\n**Troubleshooting:**\n\n**High Full Scan Rate (>100/min):**\n\n**Step 1: Identify Queries**\n```sql\n-- Find queries doing full scans\nSELECT query_sample_text, count_star, \n       sum_no_index_used, sum_no_good_index_used\nFROM performance_schema.events_statements_summary_by_digest\nWHERE sum_no_index_used > 0 OR sum_no_good_index_used > 0\nORDER BY sum_no_index_used DESC LIMIT 10;\n\n-- Tables with missing indexes\nSELECT object_schema, object_name, count_star\nFROM performance_schema.table_io_waits_summary_by_index_usage\nWHERE index_name IS NULL\nAND count_star > 0\nAND object_schema NOT IN ('mysql', 'performance_schema')\nORDER BY count_star DESC;\n\nSHOW CREATE TABLE table_name;\nSHOW INDEX FROM table_name;\n\n-- Check table size\nSELECT table_name, table_rows, \n       ROUND(data_length/1024/1024, 2) AS data_mb\nFROM information_schema.tables\nWHERE table_schema = 'your_database'\nORDER BY data_length DESC;\n\n-- For WHERE clauses\nALTER TABLE table_name ADD INDEX idx_column (column_name);\n\n-- For composite conditions\nALTER TABLE table_name ADD INDEX idx_multi (col1, col2, col3);\n\n-- For JOIN conditions\nALTER TABLE table_name ADD INDEX idx_fk (foreign_key_column);\n\n-- For covering index (best performance)\nALTER TABLE table_name ADD INDEX idx_covering (where_col, select_col1, select_col2);\n\nPrevention Best Practices:\n\nAlways use EXPLAIN before deploying queries\nIndex all foreign key columns\nCreate composite indexes for multi-column WHERE clauses\nKeep table statistics updated: ANALYZE TABLE table_name;\nMonitor slow query log regularly\n\nCommon Mistakes to Avoid:\n\nâŒ Using functions on indexed columns: WHERE YEAR(date_col) = 2024\nâœ… Better: WHERE date_col >= '2024-01-01' AND date_col < '2025-01-01'\nâŒ Using OR with different columns: WHERE col1 = 1 OR col2 = 2\nâœ… Better: Use UNION or separate indexes\nâŒ Leading wildcard: WHERE name LIKE '%smith'\nâœ… Better: Full-text index or reverse the search pattern",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "custom": {
            "axisBorderShow": false,
            "axisCenteredZero": true,
            "axisColorMode": "text",
            "axisLabel": "Scans/min",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "barWidthFactor": 0.6,
            "drawStyle": "line",
            "fillOpacity": 22,
            "gradientMode": "hue",
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "insertNulls": false,
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "scaleDistribution": {
              "type": "linear"
            },
            "showPoints": "auto",
            "spanNulls": false,
            "stacking": {
              "group": "A",
              "mode": "none"
            },
            "thresholdsStyle": {
              "mode": "off"
            }
          },
          "decimals": 0,
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green"
              },
              {
                "color": "#EAB839",
                "value": 10
              },
              {
                "color": "#EF843C",
                "value": 100
              },
              {
                "color": "red",
                "value": 1000
              }
            ]
          },
          "unit": "none"
        },
        "overrides": [
          {
            "matcher": {
              "id": "byFrameRefID",
              "options": "B"
            },
            "properties": [
              {
                "id": "custom.transform",
                "value": "negative-Y"
              },
              {
                "id": "unit",
                "value": "none"
              },
              {
                "id": "custom.axisCenteredZero",
                "value": true
              },
              {
                "id": "custom.axisLabel",
                "value": "Joins/min"
              },
              {
                "id": "unit",
                "value": "none"
              },
              {
                "id": "thresholds",
                "value": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "#EAB839",
                      "value": 1
                    },
                    {
                      "color": "#EF843C",
                      "value": 3
                    },
                    {
                      "color": "red",
                      "value": 7
                    }
                  ]
                }
              }
            ]
          }
        ]
      },
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 12,
        "y": 148
      },
      "id": 75,
      "options": {
        "legend": {
          "calcs": [
            "min",
            "max",
            "sum",
            "lastNotNull"
          ],
          "displayMode": "table",
          "placement": "bottom",
          "showLegend": true
        },
        "tooltip": {
          "hideZeros": false,
          "mode": "single",
          "sort": "none"
        }
      },
      "pluginVersion": "12.0.2",
      "targets": [
        {
          "alias": "full_scans_per_min",
          "datasource": {
            "type": "influxdb",
            "uid": "${InfluxDS}"
          },
          "query": "SELECT derivative(mean(\"select_scan\"), 1m) AS \"full_scans_per_min\"\nFROM \"mysql_queries\" \nWHERE (\"zone\" =~ /^$zone$/ AND \"host\" =~ /^$host$/) AND $timeFilter \nGROUP BY time($interval), \"host\" fill(null)",
          "rawQuery": true,
          "refId": "A",
          "resultFormat": "time_series"
        },
        {
          "alias": "full_Joins_per_min",
          "datasource": {
            "type": "influxdb",
            "uid": "${DS_DALLAS_SEC}"
          },
          "hide": false,
          "query": "SELECT derivative(mean(\"select_full_join\"), 1m) AS \"full_joins_per_min\"\nFROM \"mysql_queries\" \nWHERE (\"zone\" =~ /^$zone$/ AND \"host\" =~ /^$host$/) AND $timeFilter \nGROUP BY time($interval), \"host\" fill(null)",
          "rawQuery": true,
          "refId": "B",
          "resultFormat": "time_series"
        }
      ],
      "title": "Full Table Scans",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "influxdb",
        "uid": "${InfluxDS}"
      },
      "description": "",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds",
            "seriesBy": "last"
          },
          "custom": {
            "axisBorderShow": false,
            "axisCenteredZero": false,
            "axisColorMode": "text",
            "axisLabel": "",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "barWidthFactor": 0.6,
            "drawStyle": "line",
            "fillOpacity": 64,
            "gradientMode": "opacity",
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "insertNulls": false,
            "lineInterpolation": "smooth",
            "lineWidth": 1,
            "pointSize": 5,
            "scaleDistribution": {
              "type": "linear"
            },
            "showPoints": "auto",
            "spanNulls": false,
            "stacking": {
              "group": "A",
              "mode": "normal"
            },
            "thresholdsStyle": {
              "mode": "off"
            }
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green"
              },
              {
                "color": "#EAB839",
                "value": 5
              },
              {
                "color": "#EF843C",
                "value": 7
              },
              {
                "color": "red",
                "value": 10
              }
            ]
          },
          "unit": "none"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 0,
        "y": 156
      },
      "id": 110,
      "options": {
        "legend": {
          "calcs": [
            "min",
            "max",
            "sum",
            "lastNotNull"
          ],
          "displayMode": "table",
          "placement": "bottom",
          "showLegend": true
        },
        "tooltip": {
          "hideZeros": false,
          "mode": "single",
          "sort": "none"
        }
      },
      "pluginVersion": "12.0.2",
      "targets": [
        {
          "alias": "Counts",
          "datasource": {
            "type": "influxdb",
            "uid": "${DS_DALLAS_SEC}"
          },
          "query": "SELECT derivative(mean(\"slow_queries\"), 1m) AS \"slow_per_min\"\nFROM \"mysql_queries\" \nWHERE (\"zone\" =~ /^$zone$/ AND \"host\" =~ /^$host$/) AND $timeFilter \nGROUP BY time($interval), \"host\" fill(null)",
          "rawQuery": true,
          "refId": "A",
          "resultFormat": "time_series"
        }
      ],
      "title": "Slow Queries per min",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "influxdb",
        "uid": "${DS_DALLAS_PRI}"
      },
      "description": "",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds",
            "seriesBy": "last"
          },
          "custom": {
            "align": "auto",
            "cellOptions": {
              "type": "auto"
            },
            "inspect": false
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green"
              },
              {
                "color": "#EAB839",
                "value": 5
              },
              {
                "color": "#EF843C",
                "value": 7
              },
              {
                "color": "red",
                "value": 10
              }
            ]
          },
          "unit": "none"
        },
        "overrides": [
          {
            "matcher": {
              "id": "byName",
              "options": "host"
            },
            "properties": [
              {
                "id": "custom.width",
                "value": 186
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Total Queries"
            },
            "properties": [
              {
                "id": "custom.width",
                "value": 114
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Slow Queries"
            },
            "properties": [
              {
                "id": "custom.width",
                "value": 120
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Slow %"
            },
            "properties": [
              {
                "id": "custom.width",
                "value": 87
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Full Scans"
            },
            "properties": [
              {
                "id": "custom.width",
                "value": 111
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Full Joins"
            },
            "properties": [
              {
                "id": "custom.width",
                "value": 104
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Time"
            },
            "properties": [
              {
                "id": "custom.width",
                "value": 183
              }
            ]
          }
        ]
      },
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 12,
        "y": 156
      },
      "id": 111,
      "options": {
        "cellHeight": "sm",
        "footer": {
          "countRows": false,
          "fields": "",
          "reducer": [
            "sum"
          ],
          "show": false
        },
        "showHeader": true,
        "sortBy": []
      },
      "pluginVersion": "12.0.2",
      "targets": [
        {
          "alias": "Counts",
          "datasource": {
            "type": "influxdb",
            "uid": "${InfluxDS}"
          },
          "query": "SELECT \n    last(\"queries\") AS \"Total Queries\",\n    last(\"slow_queries\") AS \"Slow Queries\",\n    last(\"slow_query_pct\") AS \"Slow %\",\n    last(\"select_scan\") AS \"Full Scans\",\n    last(\"select_full_join\") AS \"Full Joins\"\nFROM \"mysql_queries\" \nWHERE (\"zone\" =~ /^$zone$/ AND \"host\" =~ /^$host$/) AND $timeFilter \nGROUP BY time($interval),\"host\"",
          "rawQuery": true,
          "refId": "A",
          "resultFormat": "table"
        }
      ],
      "title": "Query Performance Table",
      "type": "table"
    }
  ],
  "refresh": "",
  "schemaVersion": 41,
  "tags": [
    "mysql",
    "db"
  ],
  "templating": {
    "list": [
      {
        "allowCustomValue": false,
        "current": {},
        "description": "Choose the InfluxDB data source",
        "label": "Select Data Source",
        "name": "InfluxDS",
        "options": [],
        "query": "influxdb",
        "refresh": 1,
        "regex": "",
        "type": "datasource"
      },
      {
        "allowCustomValue": false,
        "current": {},
        "datasource": {
          "type": "influxdb",
          "uid": "${DS_DALLAS_SEC}"
        },
        "definition": "SHOW TAG VALUES FROM \"app_metrics\" WITH KEY = \"project\" WHERE service = 'mysql'",
        "name": "project",
        "options": [],
        "query": {
          "query": "SHOW TAG VALUES FROM \"app_metrics\" WITH KEY = \"project\" WHERE service = 'mysql'",
          "refId": "InfluxVariableQueryEditor-VariableQuery"
        },
        "refresh": 1,
        "regex": "",
        "type": "query"
      },
      {
        "allowCustomValue": false,
        "current": {},
        "datasource": {
          "type": "influxdb",
          "uid": "${InfluxDS}"
        },
        "definition": "SHOW TAG VALUES FROM \"app_metrics\" WITH KEY = \"zone\" WHERE project = '$project' and service = 'mysql'",
        "name": "zone",
        "options": [],
        "query": {
          "query": "SHOW TAG VALUES FROM \"app_metrics\" WITH KEY = \"zone\" WHERE project = '$project' and service = 'mysql'",
          "refId": "InfluxVariableQueryEditor-VariableQuery"
        },
        "refresh": 1,
        "regex": "",
        "type": "query"
      },
      {
        "allowCustomValue": false,
        "current": {},
        "datasource": {
          "type": "influxdb",
          "uid": "${DS_DALLAS_SEC}"
        },
        "definition": "SHOW TAG VALUES FROM \"app_metrics\" WITH KEY = \"host\" where project = '$project' and zone = '$zone' and service = 'mysql'",
        "includeAll": false,
        "label": "Host",
        "name": "host",
        "options": [],
        "query": {
          "query": "SHOW TAG VALUES FROM \"app_metrics\" WITH KEY = \"host\" where project = '$project' and zone = '$zone' and service = 'mysql'",
          "refId": "InfluxVariableQueryEditor-VariableQuery"
        },
        "refresh": 1,
        "regex": "",
        "type": "query"
      },
      {
        "auto": true,
        "auto_count": 300,
        "auto_min": "10s",
        "current": {
          "text": "1m",
          "value": "1m"
        },
        "label": "Interval",
        "name": "interval",
        "options": [
          {
            "selected": false,
            "text": "10s",
            "value": "10s"
          },
          {
            "selected": true,
            "text": "1m",
            "value": "1m"
          },
          {
            "selected": false,
            "text": "5m",
            "value": "5m"
          },
          {
            "selected": false,
            "text": "15m",
            "value": "15m"
          },
          {
            "selected": false,
            "text": "1h",
            "value": "1h"
          },
          {
            "selected": false,
            "text": "6h",
            "value": "6h"
          },
          {
            "selected": false,
            "text": "1d",
            "value": "1d"
          }
        ],
        "query": "10s,1m,5m,15m,1h,6h,1d",
        "refresh": 2,
        "type": "interval"
      }
    ]
  },
  "time": {
    "from": "now-30m",
    "to": "now"
  },
  "timepicker": {
    "refresh_intervals": [
      "1m",
      "5m",
      "15m",
      "30m",
      "1h",
      "2h",
      "1d"
    ]
  },
  "timezone": "Asia/Kolkata",
  "title": "MySQL Metrics",
  "uid": "777yesselSQL",
  "version": 1,
  "weekStart": ""
}
}