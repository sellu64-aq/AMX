MySQL Database Monitoring - Critical Metrics

Complete List:
1. mysql_connections
2. mysql_queries
3. mysql_throughput
4. mysql_innodb_buffer_pool
5. mysql_innodb_io
6. mysql_table_cache
7. mysql_temp_tables
8. mysql_sorts
9. mysql_handlers
10. mysql_innodb_rows
11. mysql_innodb_locks
12. mysql_innodb_log
13. mysql_open_files_tables
14. mysql_uptime â­ NEW
15. mysql_thread_cache â­ NEW
16. mysql_binlog â­ NEW
17. mysql_key_cache â­ NEW
18. mysql_prepared_statements â­ NEW
19. mysql_transactions â­ NEW
20. mysql_connection_errors â­ NEW
21. mysql_innodb_semaphores â­ NEW
22. mysql_query_cache â­ NEW
23. mysql_ssl â­ NEW
24. mysql_performance_schema â­ NEW
25. mysql_replication_source â­ NEW

1. CONNECTION METRICS
* Threads_connected - Current number of open connections
* Threads_running - Number of threads executing queries
* Max_used_connections - Maximum connections used since server start
* Aborted_connects - Failed connection attempts
* Aborted_clients - Connections aborted due to client issues
* Connection_errors_max_connections - Errors due to max_connections limit
Why Important: Monitor connection pool usage, detect connection leaks, prevent "too many connections" errors

2. QUERY PERFORMANCE METRICS
* Queries - Total queries executed
* Questions - Total statements executed by clients
* Slow_queries - Queries taking longer than long_query_time
* Select_scan - Full table scans without indexes
* Select_full_join - Joins without indexes
* Table_locks_waited - Times tables couldn't be locked immediately
* Innodb_row_lock_waits - Row lock waits
Why Important: Identify performance bottlenecks, slow queries, missing indexes

3. THROUGHPUT METRICS
* Com_select - Number of SELECT queries
* Com_insert - Number of INSERT queries
* Com_update - Number of UPDATE queries
* Com_delete - Number of DELETE queries
* Bytes_received - Bytes received from clients
* Bytes_sent - Bytes sent to clients
Why Important: Monitor database workload, track read/write patterns

4. INNODB BUFFER POOL METRICS
* Innodb_buffer_pool_size - Total buffer pool size
* Innodb_buffer_pool_pages_total - Total pages in buffer pool
* Innodb_buffer_pool_pages_data - Pages containing data
* Innodb_buffer_pool_pages_dirty - Modified pages not yet flushed
* Innodb_buffer_pool_pages_free - Free pages
* Innodb_buffer_pool_read_requests - Logical reads
* Innodb_buffer_pool_reads - Physical disk reads
* Innodb_buffer_pool_wait_free - Waits for free pages
Why Important: Buffer pool is critical for performance - monitors cache efficiency

5. INNODB I/O METRICS
* Innodb_data_reads - Number of data reads
* Innodb_data_writes - Number of data writes
* Innodb_data_read - Amount of data read (bytes)
* Innodb_data_written - Amount of data written (bytes)
* Innodb_os_log_written - Bytes written to log
* Innodb_data_fsyncs - fsync() operations
Why Important: Monitor disk I/O, identify I/O bottlenecks

6. TABLE CACHE METRICS
* Open_tables - Currently open tables
* Opened_tables - Tables opened since server start
* Table_open_cache - Maximum tables that can be open
* Table_locks_immediate - Table locks granted immediately
* Table_locks_waited - Table locks that had to wait
Why Important: Monitor table cache efficiency, detect table lock contention

7. QUERY CACHE METRICS (MySQL 5.7 and earlier)
* Qcache_hits - Queries served from cache
* Qcache_inserts - Queries added to cache
* Qcache_not_cached - Non-cacheable queries
* Qcache_free_memory - Free query cache memory
Why Important: Monitor query cache effectiveness (Note: Removed in MySQL 8.0)

8. TEMPORARY TABLE METRICS
* Created_tmp_tables - Temporary tables created in memory
* Created_tmp_disk_tables - Temporary tables created on disk
* Created_tmp_files - Temporary files created
Why Important: High disk temp tables indicate insufficient tmp_table_size/max_heap_table_size

9. REPLICATION METRICS (if applicable)
* Slave_IO_Running / Replica_IO_Running - IO thread status
* Slave_SQL_Running / Replica_SQL_Running - SQL thread status
* Seconds_Behind_Master / Seconds_Behind_Source - Replication lag
* Slave_open_temp_tables - Open temporary tables
Why Important: Monitor replication health and lag (covered by your existing script)

10. BINLOG METRICS
* Binlog_cache_use - Transactions that used binlog cache
* Binlog_cache_disk_use - Transactions using temp file (cache too small)
* Com_commit - Commit statements
* Com_rollback - Rollback statements
Why Important: Monitor transaction volume, binlog cache efficiency

11. SORT AND JOIN METRICS
* Sort_range - Sorts using ranges
* Sort_scan - Sorts using full table scan
* Sort_merge_passes - Sort merge passes (high = insufficient sort_buffer)
* Select_range - Joins using ranges
* Select_range_check - Joins without keys
Why Important: Identify inefficient queries and sorting operations

12. HANDLER METRICS
* Handler_read_first - Times first entry read from index
* Handler_read_key - Requests to read row based on key
* Handler_read_next - Requests to read next row in key order
* Handler_read_rnd - Requests to read row based on fixed position
* Handler_read_rnd_next - Requests to read next row in data file
Why Important: Understand how MySQL accesses data (sequential vs. random)

13. UPTIME AND AVAILABILITY
* Uptime - Server uptime in seconds
* Uptime_since_flush_status - Uptime since FLUSH STATUS
Why Important: Track database availability and restarts

14. MEMORY USAGE
* Key_buffer_size - MyISAM key buffer size
* Sort_buffer_size - Sort buffer size per connection
* Read_buffer_size - Read buffer size
* Join_buffer_size - Join buffer size
Why Important: Monitor memory allocation and usage

15. THREAD POOL METRICS
* Threads_cached - Threads in thread cache
* Threads_created - Threads created to handle connections
Why Important: High Threads_created indicates insufficient thread_cache_size

16. ERROR AND WARNING METRICS
* Aborted_connects - Failed authentication attempts
* Connection_errors_internal - Internal server errors
* Connection_errors_max_connections - Max connections reached
Why Important: Detect security issues, connection problems

17. TRANSACTION METRICS
* Com_begin - BEGIN statements
* Com_commit - COMMIT statements
* Com_rollback - ROLLBACK statements
* Innodb_rows_read - Rows read from InnoDB tables
* Innodb_rows_inserted - Rows inserted into InnoDB tables
* Innodb_rows_updated - Rows updated in InnoDB tables
* Innodb_rows_deleted - Rows deleted from InnoDB tables
Why Important: Monitor transaction volume and data changes

18. DEADLOCK METRICS
* Innodb_deadlocks - Number of deadlocks
* Innodb_row_lock_current_waits - Current row lock waits
Why Important: Detect concurrency issues and locking problems

19. CLUSTER/GALERA METRICS (if using Galera)
* wsrep_cluster_size - Number of nodes in cluster
* wsrep_cluster_status - Cluster status
* wsrep_local_state - Node state
* wsrep_flow_control_paused - Flow control pause time
Why Important: Monitor cluster health and replication

20. PERFORMANCE SCHEMA METRICS (MySQL 5.6+)
* File I/O waits - Time waiting for file I/O
* Table I/O waits - Time waiting for table I/O
* Lock waits - Time waiting for locks
Why Important: Deep dive into performance bottlenecks

CALCULATED METRICS (Derived)
Connection Usage Percentage
(Threads_connected / max_connections) * 100
Buffer Pool Hit Ratio
((Innodb_buffer_pool_read_requests - Innodb_buffer_pool_reads) / Innodb_buffer_pool_read_requests) * 100
Target: > 99%
Temporary Table Disk Usage Ratio
(Created_tmp_disk_tables / Created_tmp_tables) * 100
Target: < 25%
Table Cache Hit Ratio
(Open_tables / Opened_tables) * 100
Target: > 85%
Thread Cache Hit Ratio
(1 - (Threads_created / Connections)) * 100
Target: > 90%
Query Cache Hit Ratio (MySQL 5.7)
(Qcache_hits / (Qcache_hits + Com_select)) * 100
Slow Query Percentage
(Slow_queries / Questions) * 100
Target: < 1%
Aborted Connection Percentage
(Aborted_connects / Connections) * 100
Target: < 3%

MONITORING PRIORITY LEVELS
ðŸ”´ CRITICAL (Alert Immediately)
* Threads_connected approaching max_connections (>80%)
* Replication stopped (IO/SQL threads)
* Database down (can't connect)
* Innodb_buffer_pool_wait_free > 0
* Deadlocks increasing
ðŸŸ¡ WARNING (Alert if Trend Bad)
* Slow_queries increasing
* Buffer pool hit ratio < 99%
* Temp tables on disk > 25%
* Replication lag > 30 seconds
* High Threads_running (>20)
ðŸŸ¢ INFORMATIONAL (Track Trends)
* Query throughput (QPS)
* Connection count trends
* Bytes sent/received
* Uptime
* Table cache usage

RECOMMENDED ALERTING THRESHOLDS
Metric	Warning	Critical
Connection Usage	>70%	>90%
Buffer Pool Hit Ratio	<99%	<95%
Replication Lag	>30s	>60s
Slow Queries/sec	>10	>50
Threads_running	>20	>50
Disk Temp Tables %	>25%	>50%
Aborted Connects/min	>10	>50
Deadlocks/min	>1	>10
Â 
