CQ AMXdallas

CREATE CONTINUOUS QUERY ON AMXdallas BEGIN SELECT count(message) AS Count INTO AMXdallas.thirty_days.CQ_dra_logs FROM AMXdallas."1hrRP".dra_logs GROUP BY time(1m), host, level, executor_id, java_class, method, project, service, zone, nodeIP END
CREATE CONTINUOUS QUERY ON AMXdallas RESAMPLE EVERY 1m FOR 10m BEGIN SELECT mean(duration_ms) AS avg_duration_ms INTO AMXdallas.thirty_days.CQ_DRA_MeanProcessTime_ms FROM AMXdallas."1hrRP".CQ_DRA_EventProcessTime_ms GROUP BY time(1m), hostname, nodeIP END
CREATE CONTINUOUS QUERY ON AMXdallas RESAMPLE EVERY 1m FOR 10m BEGIN SELECT (max(ts_epoch) - min(ts_epoch)) / 1000000.000 AS duration_ms INTO AMXdallas."1hrRP".CQ_DRA_EventProcessTime_ms FROM AMXdallas."1hrRP".DRA_Event_ProcessTime GROUP BY time(1m), transactionId, hostname, nodeIP fill(0) END
CREATE CONTINUOUS QUERY ON AMXdallas BEGIN SELECT mean(MinTimeSpentToServeRequest) AS Min_TimeSpent_To_ServeRequest INTO AMXdallas.thirty_days.CQ_DRA_Min_TimeSpent_To_ServeRequest_1mAgg FROM AMXdallas."1hrRP".DRAlogs_KPI GROUP BY project, zone, time(1m), KPItype, host, nodeIP END
CREATE CONTINUOUS QUERY ON AMXdallas BEGIN SELECT mean(MaxTimeSpentToServeRequest) AS Max_TimeSpent_To_ServeRequest INTO AMXdallas.thirty_days.CQ_DRA_Max_TimeSpent_To_ServeRequest_1mAgg FROM AMXdallas."1hrRP".DRAlogs_KPI GROUP BY project, zone, time(1m), KPItype, host, nodeIP END
CREATE CONTINUOUS QUERY ON AMXdallas BEGIN SELECT sum(TotalRequestThatHaveFlowDefined) AS Total_Request_That_Have_FlowDefined INTO AMXdallas.thirty_days.CQ_DRA_Total_Request_That_Have_FlowDefined_1mAgg FROM AMXdallas."1hrRP".DRAlogs_KPI GROUP BY project, zone, time(1m), KPItype, host, nodeIP END
CREATE CONTINUOUS QUERY ON AMXdallas BEGIN SELECT sum(TotalFilterBasedRejectionForDiameterRequest) AS Total_FilterBased_Rejection_For_DiameterRequest INTO AMXdallas.thirty_days.CQ_DRA_Total_FilterBased_Rejection_For_DiameterRequest_1mAgg FROM AMXdallas."1hrRP".DRAlogs_KPI GROUP BY project, zone, time(1m), KPItype, host, nodeIP END
CREATE CONTINUOUS QUERY ON AMXdallas BEGIN SELECT sum(TotalRequestRejectedBasedOnFilters) AS Total_RequestRejected_Based_On_Filters INTO AMXdallas.thirty_days.CQ_DRA_Total_RequestRejected_Based_On_Filters_1mAgg FROM AMXdallas."1hrRP".DRAlogs_KPI GROUP BY project, zone, time(1m), KPItype, host, nodeIP END
CREATE CONTINUOUS QUERY ON AMXdallas BEGIN SELECT sum(TotalRequestSampled) AS Total_Request_Sampled INTO AMXdallas.thirty_days.CQ_DRA_TotalRequestSampled_1mAgg FROM AMXdallas."1hrRP".DRAlogs_KPI GROUP BY project, zone, time(1m), KPItype, host, nodeIP END
CREATE CONTINUOUS QUERY ON AMXdallas BEGIN SELECT sum(TotalRequestReceived) AS Total_Request_Received INTO AMXdallas.thirty_days.CQ_DRA_TotalRequests_1mAgg FROM AMXdallas."1hrRP".DRAlogs_KPI GROUP BY project, zone, time(1m), KPItype, host, nodeIP END
CREATE CONTINUOUS QUERY ON AMXdallas BEGIN SELECT sum(TotalOctets) AS DataUsages INTO AMXdallas.thirty_days.CQ_OCS_GyData_UsagesAPNRATwise_1mAggr FROM AMXdallas."1hrRP".Gylog WHERE RequestType != 'Initial' GROUP BY time(1m), APN, RATType, host, nodeIP END
CREATE CONTINUOUS QUERY ON AMXdallas BEGIN SELECT count(TotalOctets) AS SessionCounts INTO AMXdallas.thirty_days.CQ_OCS_SessionCounts_APNRATwise_1mAggr FROM AMXdallas."1hrRP".Gylog WHERE RequestType = 'Initial' GROUP BY time(1m), APN, RATType, host, nodeIP END
CREATE CONTINUOUS QUERY ON AMXdallas BEGIN SELECT sum(TotalOctets) AS DataUsages INTO AMXdallas.thirty_days.CQ_OCS_GyData_UsagesAPNwise_1mAggr FROM AMXdallas."1hrRP".Gylog WHERE RequestType != 'Initial' GROUP BY time(1m), APN, host, nodeIP END
CREATE CONTINUOUS QUERY ON AMXdallas BEGIN SELECT sum(TotalOctets) AS bytes INTO AMXdallas.thirty_days.CQ_OCS_DataUsages_Counts1mAggr FROM AMXdallas."1hrRP".Gylog WHERE (RequestType = 'Update' OR RequestType = 'Terminate') GROUP BY project, zone, time(1m), APN, host, AccountId, nodeIP END
CREATE CONTINUOUS QUERY ON AMXdallas BEGIN SELECT sum(TotalOctets) AS bytes INTO AMXdallas.thirty_days.CQ_OCS_DataUsages_Counts5mAggr FROM AMXdallas."1hrRP".Gylog WHERE (RequestType = 'Update' OR RequestType = 'Terminate') GROUP BY project, zone, time(5m), APN, host, AccountId, nodeIP END
CREATE CONTINUOUS QUERY ON AMXdallas BEGIN SELECT count(InputOctets) AS Affected_IMSI_Counts INTO AMXdallas.thirty_days.CQ_GyZeroBytesIMSI_counts FROM AMXdallas."1hrRP".Gylog WHERE (RequestType = 'Update' OR RequestType = 'Terminate') AND TotalOctets = 0 AND InputOctets = 0 AND OutputOctets = 0 GROUP BY project, zone, time(1m), APN, RATType, host, nodeIP END
CREATE CONTINUOUS QUERY ON AMXdallas BEGIN SELECT count(InputOctets) AS NonZerobytes_IMSI_Counts INTO AMXdallas.thirty_days.CQ_Gy_NonZeroBytesIMSI_counts FROM AMXdallas."1hrRP".Gylog WHERE (RequestType = 'Update' OR RequestType = 'Terminate') AND TotalOctets != 0 GROUP BY project, zone, time(1m), APN, RATType, host, nodeIP END
CREATE CONTINUOUS QUERY ON AMXdallas BEGIN SELECT sum(TotalOctets) AS DataUsages INTO AMXdallas.thirty_days.CQ_OCS_GyData_UsagesAPNRATwise_1mAggr FROM AMXdallas."1hrRP".Gylog WHERE RequestType != 'Initial' GROUP BY time(1m), RATType, APN, host, nodeIP END
CREATE CONTINUOUS QUERY ON AMXdallas BEGIN SELECT count(TotalOctets) AS SessionCounts INTO AMXdallas.thirty_days.CQ_Gylog1mAgg FROM AMXdallas."1hrRP".Gylog WHERE RequestType = 'Update' OR RequestType = 'Terminate' OR RequestType = 'Initial' GROUP BY project, zone, time(1m), RequestType, host, project, zone, nodeIP END
CREATE CONTINUOUS QUERY ON AMXdallas RESAMPLE EVERY 1m FOR 2m BEGIN SELECT count(message) AS log_count INTO AMXdallas.thirty_days.CQ_catalina_logs_1m FROM AMXdallas."1hrRP".Catalina_logs GROUP BY time(1m), log_level, class, app, host, zone, project, nodeIP END
CREATE CONTINUOUS QUERY ON AMXdallas RESAMPLE EVERY 1m FOR 2m BEGIN SELECT count(message) AS log_count INTO AMXdallas.thirty_days.CQ_catalina_logs_1m FROM AMXdallas."1hrRP".API_catalina_logs GROUP BY time(1m), log_level, class, app, host, zone, project, nodeIP END
CREATE CONTINUOUS QUERY ON AMXdallas RESAMPLE EVERY 1m FOR 2m BEGIN SELECT count(message) AS log_count INTO AMXdallas.thirty_days.CQ_catalina_logs_1m FROM AMXdallas."1hrRP".NC_Catalina_logs GROUP BY time(1m), log_level, class, app, host, zone, project, nodeIP END
CREATE CONTINUOUS QUERY ON AMXdallas RESAMPLE EVERY 30s FOR 5m BEGIN SELECT count(millisecond) AS ResponseCount INTO AMXdallas.thirty_days.CQ_DRASuccessFailure1mAggr FROM AMXdallas."1hrRP".DRAlogs_SummaryTrace GROUP BY project, zone, time(1m), host, FlowName, ResultCode, nodeIP END
CREATE CONTINUOUS QUERY ON AMXdallas RESAMPLE EVERY 1m FOR 10m BEGIN SELECT count(KPIName) AS trap_count INTO AMXdallas.thirty_days.CQ_SNMP_trap_counts FROM AMXdallas.one_day.SNMP GROUP BY time(5m), MachineID, description, severity, trapName, host, project, zone, nodeIP END
CREATE CONTINUOUS QUERY ON AMXdallas BEGIN SELECT count(line) AS log_level_count INTO AMXdallas.thirty_days.CQ_BillingBuilder_aggr_logs1m FROM AMXdallas."1hrRP".Billing_builderLog GROUP BY project, zone, time(1m), class, host, nodeIP, log_level, nodeIP END
CREATE CONTINUOUS QUERY ON AMXdallas BEGIN SELECT count(line) AS log_entry_count INTO AMXdallas.thirty_days.CQ_BillingInvoice_aggr_logs1m FROM AMXdallas."1hrRP".Billing_invoiceLog GROUP BY project, zone, time(1m), class, host, nodeIP, log_level, nodeIP END
CREATE CONTINUOUS QUERY ON AMXdallas BEGIN SELECT count(line) AS log_entry_count INTO AMXdallas.thirty_days.CQ_BillingUsage_aggr_logs1m FROM AMXdallas."1hrRP".Billing_usageLog GROUP BY project, zone, time(1m), class, host, nodeIP, log_level, nodeIP END
CREATE CONTINUOUS QUERY ON AMXdallas BEGIN SELECT count(message) AS count INTO AMXdallas.thirty_days.CQ_ocsLog_level_per1m FROM AMXdallas."1hrRP".ocs_logs GROUP BY time(1m), level, class, host, zone, project, nodeIP, service, method, nodeIP END
CREATE CONTINUOUS QUERY ON AMXdallas RESAMPLE EVERY 1m FOR 2m BEGIN SELECT count(error_msg) AS error_count INTO AMXdallas.thirty_days.CQ_nginx_errorlogs FROM AMXdallas."1hrRP".nginx_upstream_errors GROUP BY level, host, hostURL, project, zone, nodeIP, client_ip, serverIP, time(1m), nodeIP END
CREATE CONTINUOUS QUERY ON AMXdallas RESAMPLE EVERY 1m FOR 2m BEGIN SELECT mean(response_time) AS avg_response_time, max(response_time) AS max_response_time, min(response_time) AS min_response_time INTO AMXdallas.thirty_days.CQ_CMP_URL_response_time_1m FROM AMXdallas."1hrRP".http_response GROUP BY project, zone, node_IP, time(1m), host, server, nodeIP END
CREATE CONTINUOUS QUERY ON AMXdallas RESAMPLE EVERY 1m FOR 1h BEGIN SELECT count(imsi) AS unique_imsi_count INTO AMXdallas.one_day.CQ_unique_imsi_per_session FROM AMXdallas."1hrRP".Gxlog GROUP BY time(1h), project, zone, node_IP, host, session_id, imsi END
CREATE CONTINUOUS QUERY CQ_Access_Logs_1m ON AMXdallas RESAMPLE EVERY 1m FOR 5m BEGIN SELECT mean(request_duration) AS "Duration", count(response_size) AS CDRCounts INTO AMXdallas.thirty_days.CQ_Access_Logs_1m FROM AMXdallas."1hrRP".access_log GROUP BY project, zone, time(1m), host, response_code, app, api_name, nodeIP END

CREATE CONTINUOUS QUERY CQ_Septel_sctpStatus ON testpri RESAMPLE EVERY 1m BEGIN SELECT LAST(status_code) AS status_code,assoc_id INTO testpri.thirty_days.CQ_Septel_sctpStatus FROM testpri."1hrRP"."septel_sctp_status" GROUP BY time(1m), host, ip, zone, project, nodeIP, service END
CREATE CONTINUOUS QUERY CQ_SmartSTP_log ON testpri RESAMPLE EVERY 1m BEGIN SELECT COUNT(message) AS log_count INTO testpri.thirty_days.CQ_SmartSTP_log FROM testpri."1hrRP"."smartstp_logs" GROUP BY time(1m), host, level, class, thread, project, zone, nodeIP, service END
CREATE CONTINUOUS QUERY CQ_iMAS_Logs ON testpri RESAMPLE EVERY 1m BEGIN SELECT COUNT(message) AS log_count INTO testpri.thirty_days.CQ_iMAS_Logs FROM testpri."1hrRP"."imas_logs" GROUP BY time(1m), host, class, level, project, zone, service, nodeIP END
